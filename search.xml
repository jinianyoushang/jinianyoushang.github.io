<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>docker容器启动后修改或添加端口</title>
      <link href="/posts/5fdb66a5/"/>
      <url>/posts/5fdb66a5/</url>
      
        <content type="html"><![CDATA[<p>docker<a href="https://cloud.tencent.com/product/tke?from_column=20065&amp;from=20065">容器</a>启动后怎么修改端口映射？在docker run创建并运行容器的时候，可以通过-p指定端口映射规则。但是，也会遇到刚开始忘记设置端口映射或者设置错了需要修改的情况。当docker start运行容器后，并没有提供一个-p选项或设置，让你修改指定端口映射规则。</p><p>通常间接的办法是，保存镜像，再创建一个新的容器，在创建时指定新的端口映射。</p><h2 id="方法一：删除原有容器，重新建新容器"><a href="#方法一：删除原有容器，重新建新容器" class="headerlink" title="方法一：删除原有容器，重新建新容器"></a>方法一：删除原有容器，重新建新容器</h2><p>这个解决方案最为简单，把原来的容器删掉，重新建一个。当然这次不要忘记加上端口映射。优点是简单快捷，在测试环境使用较多。缺点是如果是<a href="https://cloud.tencent.com/solution/database?from_column=20065&amp;from=20065">数据库</a>镜像，那重新建一个又要重新配置一次，就比较麻烦了。</p><h2 id="方法二：利用docker-commit新构镜像"><a href="#方法二：利用docker-commit新构镜像" class="headerlink" title="方法二：利用docker commit新构镜像"></a>方法二：利用docker commit新构镜像</h2><p>docker commit：把一个容器的文件改动和配置信息commit到一个新的镜像。这个在测试的时候会非常有用，把容器所有的文件改动和配置信息导入成一个新的docker镜像，然后用这个新的镜像重起一个容器，这对之前的容器不会有任何影响。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker stop A</span><br><span class="line">docker commit A imageA <span class="comment">#将容器commit提交成为一个镜像</span></span><br><span class="line">docker <span class="built_in">rm</span> A <span class="comment">#删除原镜像</span></span><br><span class="line">docker run -d -p 80:80 --name A imageA <span class="comment">#启动新镜像</span></span><br></pre></td></tr></table></figure><p>这种方式的优点是不会影响统一<a href="https://cloud.tencent.com/product/cdh?from_column=20065&amp;from=20065">宿主机</a>上的其他容器。</p><h2 id="方法三：修改文件端口，重启docker服务"><a href="#方法三：修改文件端口，重启docker服务" class="headerlink" title="方法三：修改文件端口，重启docker服务"></a>方法三：修改文件端口，重启docker服务</h2><h3 id="1-停止docker-一定要先停止dokcer，不然直接修改配置文件不会生效"><a href="#1-停止docker-一定要先停止dokcer，不然直接修改配置文件不会生效" class="headerlink" title="1.停止docker(一定要先停止dokcer，不然直接修改配置文件不会生效)"></a>1.停止docker(<code>一定</code>要先停止dokcer，不然直接修改配置文件<code>不会生效</code>)</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure><h3 id="2-修改这个容器的hostconfig-json文件中的端口（如果config-v2-json里面也记录了端口，也要修改）"><a href="#2-修改这个容器的hostconfig-json文件中的端口（如果config-v2-json里面也记录了端口，也要修改）" class="headerlink" title="2.修改这个容器的hostconfig.json文件中的端口（如果config.v2.json里面也记录了端口，也要修改）"></a>2.修改这个容器的hostconfig.json文件中的端口（如果config.v2.json里面也记录了端口，也要修改）</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/lib/docker/containers/[hash_of_the_container]/hostconfig.json</span><br></pre></td></tr></table></figure><p>在 hostconfig.json 里有 “PortBindings”:{} 这个配置项，可以改成 “PortBindings”:{“80/tcp”:[{“HostIp”:”0.0.0.0”,”HostPort”:”8080”}]}</p><p>例 hostconfig.json 已删除不相关配置, 只保留格式</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;PortBindings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;5700/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;HostIp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;HostPort&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10086&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;6700/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;HostIp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;HostPort&quot;</span><span class="punctuation">:</span> <span class="string">&quot;6700&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;9000/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;HostIp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;HostPort&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-修改config-v2-json"><a href="#3-修改config-v2-json" class="headerlink" title="3.修改config.v2.json"></a>3.修改config.v2.json</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/lib/docker/containers/[hash_of_the_container]/config.v2.json</span><br></pre></td></tr></table></figure><p>如果没有ExposedPorts 在 config.v2.json 里面添加一个配置项 “ExposedPorts”:{“80/tcp”:{}} , 将这个配置项添加到 “Tty”: true, 前面，如果有就添加 “80/tcp”:{} 端口即可。</p><p>例 config.v2.json 已删除不相关配置, 只保留格式</p><p>注：这里写的都是容器内的端口</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ExposedPorts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;5700/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;6700/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;9000/tcp&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure><h3 id="4-重启-docker服务"><a href="#4-重启-docker服务" class="headerlink" title="4.重启 docker服务"></a>4.重启 docker服务</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="5-查看配置项已经修改成功"><a href="#5-查看配置项已经修改成功" class="headerlink" title="5.查看配置项已经修改成功"></a>5.查看配置项已经修改成功</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect  CONTAINER ID</span><br></pre></td></tr></table></figure><p><img src="h3t6z66nrt.png" alt="这里是引用"></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
            <tag> 追加端口 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu修改镜像源</title>
      <link href="/posts/39a0e8ef/"/>
      <url>/posts/39a0e8ef/</url>
      
        <content type="html"><![CDATA[<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">ubuntu | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p><p><a href="https://blog.csdn.net/qq_14931165/article/details/126863871">Ubuntu修改源镜像方法（22.04也能用）附带常用源镜像地址-CSDN博客</a></p><p><a href="https://mirrors.bfsu.edu.cn/help/ubuntu/">ubuntu | 镜像站使用帮助 | 北京外国语大学开源软件镜像站 | BFSU Open Source Mirror</a></p><h2 id="查看ubuntu版本号"><a href="#查看ubuntu版本号" class="headerlink" title="查看ubuntu版本号"></a>查看ubuntu版本号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br></pre></td></tr></table></figure><h2 id="1-简单方法"><a href="#1-简单方法" class="headerlink" title="1.简单方法"></a>1.简单方法</h2><p>使用sed命令进行替换。</p><p>这里是北外的源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i s@/archive.ubuntu.com/@/mirrors.bfsu.edu.cn/@g /etc/apt/sources.list</span><br><span class="line">sed -i s@/security.ubuntu.com/@/mirrors.bfsu.edu.cn/@g /etc/apt/sources.list</span><br><span class="line">apt-get clean</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure><p>这里是阿里云的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list</span><br><span class="line">sed -i s@/security.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.list</span><br><span class="line">apt-get clean</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure><h2 id="2-手动修改"><a href="#2-手动修改" class="headerlink" title="2.手动修改"></a>2.手动修改</h2><p>Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用选择的软件源镜像。</p><p>这里以ubuntu22.04为例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span></span><br><span class="line">deb https://mirrors.bfsu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span><br><span class="line"><span class="comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预发布软件源，不建议启用</span></span><br><span class="line"><span class="comment"># deb https://mirrors.bfsu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="comment"># # deb-src https://mirrors.bfsu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure><p>其余可以查看来修改</p><p><a href="https://mirrors.bfsu.edu.cn/help/ubuntu/">ubuntu | 镜像站使用帮助 | 北京外国语大学开源软件镜像站 | BFSU Open Source Mirror</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> 镜像源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker在各个平台的安装</title>
      <link href="/posts/11c41fc3/"/>
      <url>/posts/11c41fc3/</url>
      
        <content type="html"><![CDATA[<h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><h4 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h4><p><a href="https://www.docker.com/">Home - Docker</a></p><h4 id="windows安装"><a href="#windows安装" class="headerlink" title="windows安装"></a>windows安装</h4><p><a href="https://www.runoob.com/docker/windows-docker-install.html">Windows Docker 安装 | 菜鸟教程 (runoob.com)</a></p><h4 id="centos安装"><a href="#centos安装" class="headerlink" title="centos安装"></a>centos安装</h4><p><a href="https://www.runoob.com/docker/centos-docker-install.html">CentOS Docker 安装 | 菜鸟教程 (runoob.com)</a></p><p><a href="https://docs.docker.com/engine/install/centos/">Install Docker Engine on CentOS | Docker Documentation</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#旧机器 Uninstall old versions</span></span><br><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest </span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line">              </span><br><span class="line"><span class="comment">#新机器 Set up the repository</span></span><br><span class="line">sudo yum install -y yum-utils</span><br><span class="line"><span class="comment">#yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#重建yum缓冲</span></span><br><span class="line">yum makecache fast</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装 DOCKER CE</span></span><br><span class="line">yum -y install docker-ce docker-ce-cli containerd.io</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动 docker</span></span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">docker version</span><br><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line"><span class="comment">#卸载</span></span><br><span class="line">systemctl stop docker</span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="built_in">rm</span> -rf /var/lib/docker</span><br><span class="line"><span class="built_in">rm</span> -rf /var/lib/containerd</span><br></pre></td></tr></table></figure><h4 id="ubuntu安装"><a href="#ubuntu安装" class="headerlink" title="ubuntu安装"></a>ubuntu安装</h4><p>本文以Ubuntu20.05系统为例安装docker，<a href="https://link.zhihu.com/?target=https%3A//ubuntu.com/download">Ubuntu官方下载地址</a>。</p><p>检查卸载老版本docker</p><p>ubuntu下自带了docker的库，不需要添加新的源。<br>但是ubuntu自带的docker版本太低，需要先卸载旧的再安装新的。</p><p>注：docker的旧版本不一定被称为docker，<a href="https://link.zhihu.com/?target=http%3A//docker.io">http://docker.io</a> 或 docker-engine也有可能，所以我们卸载的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure><p>如果不能正常卸载，出现如下情况，显示无权限时，需要添加管理员权限才可进行卸载：</p><p><img src="v2-90241efe0f829a37c1db3fad3349c849_720w.webp" alt="img"></p><p>我们就需要使用<code>sudo apt-get remove docker docker-engine docker.io containerd runc</code>命令使用root权限来进行卸载。</p><p>安装步骤</p><h3 id="更新软件包"><a href="#更新软件包" class="headerlink" title="更新软件包"></a>更新软件包</h3><p>在终端中执行以下命令来更新Ubuntu软件包列表和已安装软件的版本:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update sudo apt upgrade</span><br></pre></td></tr></table></figure><h3 id="安装docker依赖"><a href="#安装docker依赖" class="headerlink" title="安装docker依赖"></a>安装docker依赖</h3><p>Docker在Ubuntu上依赖一些软件包。执行以下命令来安装这些依赖:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ca-certificates curl gnupg lsb-release</span><br></pre></td></tr></table></figure><h3 id="添加Docker官方GPG密钥"><a href="#添加Docker官方GPG密钥" class="headerlink" title="添加Docker官方GPG密钥"></a>添加Docker官方GPG密钥</h3><p>执行以下命令来添加Docker官方的GPG密钥:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure><p>结果如下：</p><p><img src="v2-0bd38706177023cfe438258e1009d83a_720w.webp" alt="img"></p><h3 id="添加Docker软件源"><a href="#添加Docker软件源" class="headerlink" title="添加Docker软件源"></a>添加Docker软件源</h3><p>执行以下命令来添加Docker的软件源:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br></pre></td></tr></table></figure><p><strong>注：该命令需要使用root权限</strong></p><p><img src="v2-cbcdc65224f69f4e6c3c5ee5ac696012_720w.webp" alt="img"></p><h3 id="安装docker-1"><a href="#安装docker-1" class="headerlink" title="安装docker"></a>安装docker</h3><p>执行以下命令来安装Docker:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h3 id="配置用户组（可选）"><a href="#配置用户组（可选）" class="headerlink" title="配置用户组（可选）"></a>配置用户组（可选）</h3><p>默认情况下，只有root用户和docker组的用户才能运行Docker命令。我们可以将当前用户添加到docker组，以避免每次使用Docker时都需要使用sudo。命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><p><strong>注：重新登录才能使更改生效。</strong></p><p>运行docker</p><p>我们可以通过启动<code>docker</code>来验证我们是否成功安装。命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a><strong>安装工具</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install apt-transport-https ca-certificates curl software-properties-common</span><br></pre></td></tr></table></figure><h3 id="重启docker"><a href="#重启docker" class="headerlink" title="重启docker"></a><strong>重启docker</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker restart</span><br></pre></td></tr></table></figure><h3 id="验证是否成功"><a href="#验证是否成功" class="headerlink" title="验证是否成功"></a><strong>验证是否成功</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure><p>运行命令后，结果如下：</p><p><img src="v2-97314d2165190bb4a6926facc7e77eeb_720w.webp" alt="img"></p><p>因为我们之前没有拉取过<code>hello-world</code>，所以运行命令后会出现本地没有该镜像，并且会自动拉取的操作。</p><h3 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a><strong>查看版本</strong></h3><p>我们可以通过下面的命令来查看<code>docker</code>的版本</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker version</span><br></pre></td></tr></table></figure><p>结果如下：</p><p><img src="v2-89ef2e517ffd86d80f65b6a0d2a0b159_720w.webp" alt="img"></p><h3 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a><strong>查看镜像</strong></h3><p>上面我们拉取了hello-world的镜像，现在我们可以通过命令来查看镜像，命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure><p>结果如下图：</p><p><img src="v2-240135177c5b1fbe9d8897dac4beec4c_720w.webp" alt="img"></p><p>出现上述情况，即表示我们成功在Ubuntu系统上安装了docker。</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
            <tag> centos </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置国内Docker镜像源</title>
      <link href="/posts/1ac1559c/"/>
      <url>/posts/1ac1559c/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>安装好 <code>Docker</code> 后，其 <code>registry server</code> 是默认指向 <code>https://hub.docker.com</code> 的。在国内该hub源访问速度异常慢，尤其是大一点的镜像经常出现timeout。</p><p>我们可以通过切换至国内镜像仓库来解决这一问题</p><h2 id="配置镜像仓库"><a href="#配置镜像仓库" class="headerlink" title="配置镜像仓库"></a>配置镜像仓库</h2><p>1.修改配置文件 <code>/etc/docker/daemon.json</code>：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>2.增加或修改以下配置内容：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://dockerproxy.com&quot;,</span><br><span class="line">    &quot;https://hub-mirror.c.163.com&quot;,</span><br><span class="line">    &quot;https://mirror.baidubce.com&quot;,</span><br><span class="line">    &quot;https://ccr.ccs.tencentyun.com&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.重启docker，让配置生效</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>4.检查配置是否生效</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure><p>输出结果中显示 <code>Registry Mirrors</code> 为配置文件配置内容，说明配置成功</p><h2 id="Docker-hub-镜像源"><a href="#Docker-hub-镜像源" class="headerlink" title="Docker hub 镜像源"></a>Docker hub 镜像源</h2><div class="table-container"><table><thead><tr><th>提供商</th><th>公共镜像地址</th></tr></thead><tbody><tr><td>网易云</td><td><a href="https://link.zhihu.com/?target=http%3A//hub-mirror.c.163.com">http://hub-mirror.c.163.com</a></td></tr><tr><td>百度云</td><td><a href="https://link.zhihu.com/?target=http%3A//mirror.baidubce.com">http://mirror.baidubce.com</a></td></tr><tr><td>腾讯云</td><td><a href="https://link.zhihu.com/?target=http%3A//ccr.ccs.tencentyun.com">http://ccr.ccs.tencentyun.com</a></td></tr><tr><td>Docker Proxy</td><td><a href="https://link.zhihu.com/?target=http%3A//dockerproxy.com">http://dockerproxy.com</a></td></tr></tbody></table></div><h2 id="测试镜像源是否有效"><a href="#测试镜像源是否有效" class="headerlink" title="测试镜像源是否有效"></a>测试镜像源是否有效</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker pull dockerproxy.com/library/nginx:latest</span><br><span class="line">docker pull hub-mirror.c.163.com/library/nginx:latest</span><br><span class="line">docker pull mirror.baidubce.com/library/nginx:latest</span><br><span class="line">docker pull ccr.ccs.tencentyun.com/library/nginx:latest</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
            <tag> 镜像源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最详细的ubuntu安装docker教程</title>
      <link href="/posts/3756cf19/"/>
      <url>/posts/3756cf19/</url>
      
        <content type="html"><![CDATA[<h2 id="系统版本"><a href="#系统版本" class="headerlink" title="系统版本"></a>系统版本</h2><p>本文以Ubuntu20.05系统为例安装docker，<a href="https://link.zhihu.com/?target=https%3A//ubuntu.com/download">Ubuntu官方下载地址</a>。</p><p>检查卸载老版本docker</p><p>ubuntu下自带了docker的库，不需要添加新的源。<br>但是ubuntu自带的docker版本太低，需要先卸载旧的再安装新的。</p><p>注：docker的旧版本不一定被称为docker，<a href="https://link.zhihu.com/?target=http%3A//docker.io">http://docker.io</a> 或 docker-engine也有可能，所以我们卸载的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure><p>如果不能正常卸载，出现如下情况，显示无权限时，需要添加管理员权限才可进行卸载：</p><p><img src="v2-90241efe0f829a37c1db3fad3349c849_720w.webp" alt="img"></p><p>我们就需要使用<code>sudo apt-get remove docker docker-engine docker.io containerd runc</code>命令使用root权限来进行卸载。</p><p>安装步骤</p><h3 id="更新软件包"><a href="#更新软件包" class="headerlink" title="更新软件包"></a>更新软件包</h3><p>在终端中执行以下命令来更新Ubuntu软件包列表和已安装软件的版本:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update sudo apt upgrade</span><br></pre></td></tr></table></figure><h3 id="安装docker依赖"><a href="#安装docker依赖" class="headerlink" title="安装docker依赖"></a>安装docker依赖</h3><p>Docker在Ubuntu上依赖一些软件包。执行以下命令来安装这些依赖:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ca-certificates curl gnupg lsb-release</span><br></pre></td></tr></table></figure><h3 id="添加Docker官方GPG密钥"><a href="#添加Docker官方GPG密钥" class="headerlink" title="添加Docker官方GPG密钥"></a>添加Docker官方GPG密钥</h3><p>执行以下命令来添加Docker官方的GPG密钥:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure><p>结果如下：</p><p><img src="v2-0bd38706177023cfe438258e1009d83a_720w.webp" alt="img"></p><h3 id="添加Docker软件源"><a href="#添加Docker软件源" class="headerlink" title="添加Docker软件源"></a>添加Docker软件源</h3><p>执行以下命令来添加Docker的软件源:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository &quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</span><br></pre></td></tr></table></figure><p><strong>注：该命令需要使用root权限</strong></p><p><img src="v2-cbcdc65224f69f4e6c3c5ee5ac696012_720w.webp" alt="img"></p><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>执行以下命令来安装Docker:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure><h3 id="配置用户组（可选）"><a href="#配置用户组（可选）" class="headerlink" title="配置用户组（可选）"></a>配置用户组（可选）</h3><p>默认情况下，只有root用户和docker组的用户才能运行Docker命令。我们可以将当前用户添加到docker组，以避免每次使用Docker时都需要使用sudo。命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><p><strong>注：重新登录才能使更改生效。</strong></p><p>运行docker</p><p>我们可以通过启动<code>docker</code>来验证我们是否成功安装。命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a><strong>安装工具</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install apt-transport-https ca-certificates curl software-properties-common</span><br></pre></td></tr></table></figure><h3 id="重启docker"><a href="#重启docker" class="headerlink" title="重启docker"></a><strong>重启docker</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker restart</span><br></pre></td></tr></table></figure><h3 id="验证是否成功"><a href="#验证是否成功" class="headerlink" title="验证是否成功"></a><strong>验证是否成功</strong></h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure><p>运行命令后，结果如下：</p><p><img src="v2-97314d2165190bb4a6926facc7e77eeb_720w.webp" alt="img"></p><p>因为我们之前没有拉取过<code>hello-world</code>，所以运行命令后会出现本地没有该镜像，并且会自动拉取的操作。</p><h3 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a><strong>查看版本</strong></h3><p>我们可以通过下面的命令来查看<code>docker</code>的版本</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker version</span><br></pre></td></tr></table></figure><p>结果如下：</p><p><img src="v2-89ef2e517ffd86d80f65b6a0d2a0b159_720w.webp" alt="img"></p><h3 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a><strong>查看镜像</strong></h3><p>上面我们拉取了hello-world的镜像，现在我们可以通过命令来查看镜像，命令如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br></pre></td></tr></table></figure><p>结果如下图：</p><p><img src="v2-240135177c5b1fbe9d8897dac4beec4c_720w.webp" alt="img"></p><p>出现上述情况，即表示我们成功在Ubuntu系统上安装了docker。</p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> docker </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vcpkg常用命令说明</title>
      <link href="/posts/aa152842/"/>
      <url>/posts/aa152842/</url>
      
        <content type="html"><![CDATA[<h4 id="搜索可用库"><a href="#搜索可用库" class="headerlink" title="搜索可用库"></a>搜索可用库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg search ***</span><br></pre></td></tr></table></figure><h4 id="安装三方库"><a href="#安装三方库" class="headerlink" title="安装三方库"></a>安装三方库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install boost:x64-windows</span><br><span class="line"></span><br><span class="line">#移除一个开源库（已安装）注意：1. 默认移除 x86-winodws 版本库，如需移除其他版本库，需指定。</span><br><span class="line">#2. 只移除库本身，源码包和解压后的源码并未移除。</span><br><span class="line">vcpkg remove curl</span><br></pre></td></tr></table></figure><p>默认情况下，Vcpkg使用的编译环境是x86-windows, x64-linux.cmake或x64-osx.cmake。</p><h4 id="列出已安装的开源库"><a href="#列出已安装的开源库" class="headerlink" title="列出已安装的开源库"></a>列出已安装的开源库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg list</span><br></pre></td></tr></table></figure><h4 id="更新已安装的开源库"><a href="#更新已安装的开源库" class="headerlink" title="更新已安装的开源库"></a>更新已安装的开源库</h4><p>想要更新已安装的开源库，一般有两个指令：一个是update指令，可以显示可以升级的开源库的列表；另一个是upgrade的指令，会重新编译所有需要更新的包。</p><h4 id="导出已安装的开源库"><a href="#导出已安装的开源库" class="headerlink" title="导出已安装的开源库"></a>导出已安装的开源库</h4><p>想要导出已安装的开源库，那么执行 export 指令即可。比如我们要导出 curl 库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vcpkg export curl --7zip</span><br><span class="line"></span><br><span class="line">#注意：默认导出 x86-windows 版本库，如需导出其他版本，需指定。</span><br><span class="line">默认导出 vcpkg 目录下，默认导出包名称 vcpkg-export-日期-时间，如需指定目录和名称，使用 “-output=” 参数。</span><br><span class="line">　　　　　导出必须指定包格式：</span><br><span class="line">　　　　　　　--raw：以目录格式导出</span><br><span class="line">　　　　　　　--nuget：以 nuget 格式导出</span><br><span class="line">　　　　　　　--ifw：未知</span><br><span class="line">　　　　　　　--zip：以 zip 格式导出</span><br><span class="line">　　　　　　　--7zip：以 7z 格式导出</span><br></pre></td></tr></table></figure><h4 id="导入已备份的开源库"><a href="#导入已备份的开源库" class="headerlink" title="导入已备份的开源库"></a>导入已备份的开源库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg import xxx.7z</span><br></pre></td></tr></table></figure><h4 id="集成至Visual-Studio中-Windows"><a href="#集成至Visual-Studio中-Windows" class="headerlink" title="集成至Visual Studio中(Windows)"></a>集成至Visual Studio中(Windows)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vcpkg integrate install</span><br><span class="line"></span><br><span class="line">#取消集成</span><br><span class="line">vcpkg integrate remove</span><br></pre></td></tr></table></figure><h4 id="好用的库-安装多个库"><a href="#好用的库-安装多个库" class="headerlink" title="好用的库-安装多个库"></a>好用的库-安装多个库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install opencv4 eigen3 glm freeimage opencv opencv[contrib] opencv[ade] opencv[cuda] ceres opengl ceres boost glad glew --keep-going</span><br></pre></td></tr></table></figure><h4 id="解决网速慢"><a href="#解决网速慢" class="headerlink" title="解决网速慢"></a>解决网速慢</h4><p><strong>方法1：先下载，后编译</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vcpkg.exe install ceres --only-downloads</span><br><span class="line">vcpkg.exe install ceres</span><br></pre></td></tr></table></figure><p><strong>方法2：改端口</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">如果有proxy（没有就不用看了），下载还是很慢，就是端口号没设置好。</span><br><span class="line">在powershell中，注意是powershell而不是dos（不会真的有人用dos配置vcpkg吧），输入如下代码设置环境变量：</span><br><span class="line">下面只是临时改环境变量，</span><br><span class="line"></span><br><span class="line">$env:HTTP_PROXY=&quot;localhost:4780&quot;</span><br><span class="line">$env:HTTPS_PROXY=&quot;localhost:4780&quot;</span><br></pre></td></tr></table></figure><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">集成到全局：vcpkg integrate install</span><br><span class="line">移除全局：vcpkg integrate remove</span><br><span class="line">集成到工程：vcpkg integrate project（在“\scripts\buildsystems”目录下，生成nuget配置文件）</span><br><span class="line">查看库目录：vcpkg search</span><br><span class="line">查看支持的架构：vcpkg help triplet</span><br><span class="line">指定编译某种架构的程序库：vcpkg install xxxx:x64-windows（x86-windows）</span><br><span class="line">卸载已安装库：vcpkg remove xxxx</span><br><span class="line">指定卸载平台：vcpkg remove xxxx:x64-windows</span><br><span class="line">移除所有旧版本库：vcpkg remove --outdated</span><br><span class="line">查看已经安装的库：vcpkg list</span><br><span class="line">更新已经安装的库：vcpkg update xxx</span><br><span class="line">导出已经安装的库：vcpkg export xxxx --7zip（–7zip –raw –nuget –ifw –zip）</span><br></pre></td></tr></table></figure><h4 id="vcpkg-目录文件及文件夹说明"><a href="#vcpkg-目录文件及文件夹说明" class="headerlink" title="vcpkg 目录文件及文件夹说明"></a>vcpkg 目录文件及文件夹说明</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">buildtrees - 包含从中生成每个库的源的子文件夹，一般在xxxx.clean文件夹下。</span><br><span class="line">docs - 文档和示例。</span><br><span class="line">downloads - 所有已下载的工具或源的缓存副本。 运行安装命令时，vcpkg 会首先搜索此处。</span><br><span class="line">installed - 包含每个已安装库的标头和二进制文件。 与 Visual Studio 集成时，实质上是相当于告知它将此文件夹添加到其搜索路径。</span><br><span class="line">packages - 在不同的安装之间用于暂存的内部文件夹。</span><br><span class="line">ports - 用于描述每个库的目录、版本和下载位置的文件。 如有需要，可添加自己的端口。</span><br><span class="line">scripts - 由 vcpkg 使用的脚本（CMake、PowerShell）。</span><br><span class="line">toolsrc - vcpkg 和相关组件的 C++ 源代码。</span><br><span class="line">triplets - 包含每个受支持目标平台（如 x86-windows 或 x64-uwp）的设置。</span><br><span class="line"></span><br><span class="line">更新包指令 vcpkg upgrade --no-dry-run</span><br></pre></td></tr></table></figure><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://zhuanlan.zhihu.com/p/383683670">vcpkg国内镜像使用方法 - 知乎 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/87391067">Vcpkg——C++包管理工具 - 知乎 (zhihu.com)</a></p><p><a href="https://www.cnblogs.com/hik-wxy/p/14744272.html">vcpkg：跨平台 C++ 包管理器的安装教程 - hik_wxy - 博客园 (cnblogs.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> vcpkg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vcpkg </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMake (Clion) 中使用vcpkg</title>
      <link href="/posts/d5ac61a7/"/>
      <url>/posts/d5ac61a7/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/microsoft/vcpkg#using-vcpkg-with-cmake">microsoft/vcpkg: C++ Library Manager for Windows, Linux, and MacOS (github.com)</a></p><p><strong>需要注意的是vcpkg在windows默认用MSVC进行编译，所以在项目中使用也应该用MSVC编译器才可以使用</strong></p><h3 id="使用-shell-安装软件包"><a href="#使用-shell-安装软件包" class="headerlink" title="使用 shell 安装软件包"></a>使用 shell 安装软件包</h3><p>以eigen3安装为例，在vcpkg的根目录下打开power shell，输入</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg install eigen3</span><br></pre></td></tr></table></figure><p>这里在安装成功之后一般会给出包的使用方法提示</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find_package(Eigen3 CONFIG REQUIRED)</span><br><span class="line">target_link_libraries(main PRIVATE Eigen3::Eigen)</span><br></pre></td></tr></table></figure><h3 id="简单使用方式"><a href="#简单使用方式" class="headerlink" title="简单使用方式"></a>简单使用方式</h3><p>按照官方给出的办法使用包，方便之处在于不需要额外配置头文件和lib的路径，也不需要手动将dll文件放到bin目录下，vcpkg会自动完成这些配置。</p><p>如果你没有在环境变量中配置vcpkg的相关变量，而是在CMakeLists中配置vcpkg，需要注意把vcpkg的配置信息放在project之前，如下</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.21.0)</span><br><span class="line"></span><br><span class="line">set(VCPKG_ROOT &quot;E:/vcpkg&quot;)            # 手动设置到你的vcpkg根目录</span><br><span class="line">set(CMAKE_TOOLCHAIN_FILE &quot;$&#123;VCPKG_ROOT&#125;/scripts/buildsystems/vcpkg.cmake&quot;)</span><br><span class="line"></span><br><span class="line">project(MyProject LANGUAGES CXX)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="openssl使用例子"><a href="#openssl使用例子" class="headerlink" title="openssl使用例子"></a>openssl使用例子</h3><p>安装openssl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install openssl</span><br></pre></td></tr></table></figure><p><img src="image-20240309163359578.png" alt="image-20240309163359578"></p><p>复制里面的内容,后面使用</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(OpenSSL REQUIRED)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(main PRIVATE OpenSSL::SSL OpenSSL::Crypto)</span><br></pre></td></tr></table></figure><p>打开Clion，新建项目，在CmakeLists.txt填入上面内容</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.26</span>)</span><br><span class="line"><span class="keyword">set</span>(VCPKG_ROOT <span class="string">&quot;C:/softwares/vcpkg-master&quot;</span>)            <span class="comment"># 手动设置到你的vcpkg根目录</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_TOOLCHAIN_FILE <span class="string">&quot;$&#123;VCPKG_ROOT&#125;/scripts/buildsystems/vcpkg.cmake&quot;</span>)</span><br><span class="line"><span class="keyword">project</span>(clion_demo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"><span class="keyword">add_compile_options</span>(<span class="string">&quot;$&lt;$&lt;C_COMPILER_ID:MSVC&gt;:/utf-8&gt;&quot;</span>)</span><br><span class="line"><span class="keyword">add_compile_options</span>(<span class="string">&quot;$&lt;$&lt;CXX_COMPILER_ID:MSVC&gt;:/utf-8&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里添加包</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenSSL REQUIRED)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PRIVATE OpenSSL::SSL OpenSSL::Crypto)</span><br></pre></td></tr></table></figure><p>main.cpp文件如下</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/rsa.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/pem.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 生成 RSA 密钥对</span></span><br><span class="line">    RSA *rsa = <span class="built_in">RSA_generate_key</span>(<span class="number">2048</span>, RSA_F4, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (!rsa) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to generate RSA key pair\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加密明文</span></span><br><span class="line">    std::string plaintext = <span class="string">&quot;Hello, RSA!&quot;</span>;</span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">unsigned</span> <span class="type">char</span>&gt; <span class="title">ciphertext</span><span class="params">(RSA_size(rsa))</span></span>;</span><br><span class="line">    <span class="type">int</span> ciphertext_len = <span class="built_in">RSA_public_encrypt</span>(plaintext.<span class="built_in">size</span>(),</span><br><span class="line">                                            <span class="built_in">reinterpret_cast</span>&lt;<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *&gt;(plaintext.<span class="built_in">c_str</span>()),</span><br><span class="line">                                            ciphertext.<span class="built_in">data</span>(), rsa, RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span> (ciphertext_len == <span class="number">-1</span>) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;RSA encryption failed\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解密密文</span></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">unsigned</span> <span class="type">char</span>&gt; <span class="title">decryptedtext</span><span class="params">(RSA_size(rsa))</span></span>;</span><br><span class="line">    <span class="type">int</span> decryptedtext_len = <span class="built_in">RSA_private_decrypt</span>(ciphertext_len, ciphertext.<span class="built_in">data</span>(), decryptedtext.<span class="built_in">data</span>(), rsa,</span><br><span class="line">                                                RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span> (decryptedtext_len == <span class="number">-1</span>) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;RSA decryption failed\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印结果</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Plaintext: &quot;</span> &lt;&lt; plaintext &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Ciphertext: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ciphertext_len; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%02x&quot;</span>, ciphertext[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Decryptedtext: &quot;</span></span><br><span class="line">              &lt;&lt; std::<span class="built_in">string</span>(<span class="built_in">reinterpret_cast</span>&lt;<span class="type">const</span> <span class="type">char</span> *&gt;(decryptedtext.<span class="built_in">data</span>()), decryptedtext_len) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放 RSA 密钥对</span></span><br><span class="line">    <span class="built_in">RSA_free</span>(rsa);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 生成 RSA 密钥对</span></span><br><span class="line">    RSA* rsa = <span class="built_in">RSA_new</span>();</span><br><span class="line">    BIGNUM* exponent = <span class="built_in">BN_new</span>();</span><br><span class="line">    <span class="built_in">BN_set_word</span>(exponent, RSA_F4);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">RSA_generate_key_ex</span>(rsa, <span class="number">2048</span>, exponent, <span class="literal">nullptr</span>)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to generate RSA key pair\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存公钥</span></span><br><span class="line">    std::string pubkey_filename = <span class="string">&quot;publickey.pem&quot;</span>;</span><br><span class="line">    FILE* pubkey_file = <span class="built_in">fopen</span>(pubkey_filename.<span class="built_in">c_str</span>(), <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!pubkey_file) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to create public key file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">PEM_write_RSAPublicKey</span>(pubkey_file, rsa)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to write public key to file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(pubkey_file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存私钥</span></span><br><span class="line">    std::string privkey_filename = <span class="string">&quot;privatekey.pem&quot;</span>;</span><br><span class="line">    FILE* privkey_file = <span class="built_in">fopen</span>(privkey_filename.<span class="built_in">c_str</span>(), <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!privkey_file) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to create private key file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">PEM_write_RSAPrivateKey</span>(privkey_file, rsa, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="number">0</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to write private key to file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(privkey_file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    <span class="built_in">RSA_free</span>(rsa);</span><br><span class="line">    <span class="built_in">BN_free</span>(exponent);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();     <span class="comment">//加密字符串例子</span></span><br><span class="line">    <span class="built_in">test02</span>();      <span class="comment">//c++ openssl生成公钥私钥保存到文件 有问题</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果，表示可以成功使用</p><p><img src="image-20240309163710420.png" alt="image-20240309163710420"></p><h3 id="使用-vcpkg-json-为你的项目配置第三方依赖"><a href="#使用-vcpkg-json-为你的项目配置第三方依赖" class="headerlink" title="使用 vcpkg.json 为你的项目配置第三方依赖"></a>使用 vcpkg.json 为你的项目配置第三方依赖</h3><p>可能你的项目需要在多台电脑上编译，如果在每台电脑上都使用shell手动安装依赖库显然不是优雅的解决办法。又或者你的项目需要固定第三方依赖的版本，而vcpkg的命令行似乎没有给出选择软件包版本的选项，难道只能通过不更新vcpkg来使软件库永远保持在某个版本吗？那如果想对某个依赖的版本降级怎么办？</p><p>对于自动安装依赖的问题，vcpkg给出的解决办法是，在你的项目的根目录也就是顶级CMakeLists.txt所在目录创建名为vcpkg.json的配置文件：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;:&quot;MyProject_dependencies&quot;,</span><br><span class="line">    &quot;version-semver&quot;:&quot;1.0.0&quot;,</span><br><span class="line">    &quot;dependencies&quot;:[</span><br><span class="line">        &quot;cgal&quot;,</span><br><span class="line">        &quot;eigen3&quot;,</span><br><span class="line">        &quot;freeimage&quot;,</span><br><span class="line">        &quot;glm&quot;,</span><br><span class="line">        &quot;glew&quot;,</span><br><span class="line">        &quot;flann&quot;,</span><br><span class="line">        &quot;lz4&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>并在环境变量或CMakeLists中配置变量</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(VCPKG_FEATURE_FLAGS &quot;version&quot;)          # 用于支持自定义依赖版本</span><br></pre></td></tr></table></figure><p>如此，不需要在shell手动安装软件包，运行cmake的时候vcpkg会自动将配置文件中的所有依赖安装到你项目的build\vcpkg_installed目录下。</p><h3 id="关于vcpkg支持哪些库"><a href="#关于vcpkg支持哪些库" class="headerlink" title="关于vcpkg支持哪些库"></a>关于vcpkg支持哪些库</h3><p>使用shell命令</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg search ***</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/615585442">VS2022 + vcpkg 使用 - 知乎 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/477497540">使用VCPKG管理你的第三方依赖 - 知乎 (zhihu.com)</a></p><p><a href="https://learn.microsoft.com/zh-cn/vcpkg/commands/install">vcpkg install | Microsoft Learn</a></p><p><a href="https://learn.microsoft.com/zh-cn/vcpkg/get_started/overview">vcpkg 概述 | Microsoft Learn</a></p>]]></content>
      
      
      <categories>
          
          <category> vcpkg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vcpkg </tag>
            
            <tag> Clion </tag>
            
            <tag> Cmake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用vcpkg管理C++项目依赖</title>
      <link href="/posts/67c5155/"/>
      <url>/posts/67c5155/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>vcpkg是微软公司开发的一个用于在多个平台上管理C++库的开源工具。它提供了一个简单易用的方式来下载、构建和安装各种C++库，以解决C++开发中的依赖管理问题</li><li>vcpkg支持Windows、macOS和Linux等多个操作系统，为开发人员提供了跨平台的便捷工具来集成和管理C++库。</li><li>提供了超过2000个C++库，可以一键安装常见的C++库：如Opencv、Qt、openssl、boost、glew、glad等；</li><li>缺点是，每个库都需要在本地自动编译，有的库安装时间较长。</li></ul><h2 id="vcpkg安装"><a href="#vcpkg安装" class="headerlink" title="vcpkg安装"></a>vcpkg安装</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>git地址：<a href="https://github.com/Microsoft/vcpkg">microsoft/vcpkg: C++ Library Manager for Windows, Linux, and MacOS (github.com)</a></p><p>可以使用命令clone下来：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Microsoft/vcpkg.git</span><br></pre></td></tr></table></figure><p>也可直接在网页上下载zip文件并解压</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>打开clone 下来的vcpkg目录（或解压的目录）</p><p>shift+鼠标右键打开powershell（或cmd）</p><p>输入如下命令：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bootstrap-vcpkg.bat</span><br></pre></td></tr></table></figure><p>完成后输入</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg.exe --help</span><br></pre></td></tr></table></figure><p>查看输出：</p><p><img src="v2-cdde573de4635e063b1b54d0fd36d909_720w.webp" alt="img"></p><p>将vcpkg目录加入环境变量中：</p><p>环境变量名：VCPKG_ROOT</p><p>值： vcpkg的安装目录，我的路径为C:\softwares\vcpkg-master</p><h2 id="集成到VS2022项目中"><a href="#集成到VS2022项目中" class="headerlink" title="集成到VS2022项目中"></a>集成到VS2022项目中</h2><p>1.在vcpkg文件夹中打开powershell或cmd，输入以下命令：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg integrate project</span><br></pre></td></tr></table></figure><p>查看输出：</p><p><img src="v2-c74d65934469621c3fd58fb33a104216_720w.webp" alt="img"></p><p>2.输入命令：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg integrate install</span><br></pre></td></tr></table></figure><p>查看输出：</p><p><img src="v2-6e081a5837120b462d7da066ab1dd1c4_720w.png" alt="img"></p><p>3.打开VS2022项目，打开NuGet包管理器：</p><p><img src="v2-f3bceec5e0115572e5d2797508ab3194_720w.png" alt="img"></p><p>将vcpkg添加在程序包源中，如图所示：</p><p><img src="v2-515c378010a7c08a66ba5a9ccd5eb718_720w.webp" alt="img"></p><p>4.右键工程， 管理NuGet程序包，程序包源选择vcpkg，点击浏览标签页，选择“vcpkg.E.git.vcpkg”并在右侧窗口点击安装</p><p><img src="v2-0a7c2c1f359008bc82330af77483bd7e_720w.webp" alt="img"></p><p>安装完成后即可使用vcpkg安装的三方库了。</p><h3 id="测试使用vcpkg安装boost-shared库版，并使用uuid模块进行测试"><a href="#测试使用vcpkg安装boost-shared库版，并使用uuid模块进行测试" class="headerlink" title="测试使用vcpkg安装boost shared库版，并使用uuid模块进行测试"></a>测试使用vcpkg安装boost shared库版，并使用uuid模块进行测试</h3><p>在vcpkg目录下打开powershell或cmd，输入如下命令安装boost1.81 shared版：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install boost:x64-windows</span><br></pre></td></tr></table></figure><p>vcpkg可支持如下类型：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">Available architecture triplets:</span><br><span class="line">vcpkg built-in triplets:</span><br><span class="line">  arm-uwp</span><br><span class="line">  arm64-windows</span><br><span class="line">  x64-linux</span><br><span class="line">  x64-osx</span><br><span class="line">  x64-uwp</span><br><span class="line">  x64-windows-static</span><br><span class="line">  x64-windows</span><br><span class="line">  x86-windows</span><br><span class="line">VCPKG community triplets:</span><br><span class="line">  arm-android</span><br><span class="line">  arm-ios</span><br><span class="line">  arm-linux-release</span><br><span class="line">  arm-linux</span><br><span class="line">  arm-mingw-dynamic</span><br><span class="line">  arm-mingw-static</span><br><span class="line">  arm-neon-android</span><br><span class="line">  arm-uwp-static-md</span><br><span class="line">  arm-windows-static</span><br><span class="line">  arm-windows</span><br><span class="line">  arm64-android</span><br><span class="line">  arm64-ios</span><br><span class="line">  arm64-linux-release</span><br><span class="line">  arm64-linux</span><br><span class="line">  arm64-mingw-dynamic</span><br><span class="line">  arm64-osx-dynamic</span><br><span class="line">  arm64-osx-release</span><br><span class="line">  arm64-osx</span><br><span class="line">  arm64-uwp-static-md</span><br><span class="line">  arm64-uwp</span><br><span class="line">  arm64-windows-static-md</span><br><span class="line">  arm64-windows-static-release</span><br><span class="line">  arm64-windows-static</span><br><span class="line">  arm64ec-windows</span><br><span class="line">  armv6-android</span><br><span class="line">  ppc64le-linux-release</span><br><span class="line">  ppc64le-linux</span><br><span class="line">  riscv32-linux-release</span><br><span class="line">  riscv32-linux</span><br><span class="line">  riscv64-linux-release</span><br><span class="line">  riscv64-linux</span><br><span class="line">  s390x-linux-release</span><br><span class="line">  s390x-linux</span><br><span class="line">  wasm32-emscripten</span><br><span class="line">  x64-android</span><br><span class="line">  x64-freebsd</span><br><span class="line">  x64-ios</span><br><span class="line">  x64-linux-dynamic</span><br><span class="line">  x64-linux-release</span><br><span class="line">  x64-mingw-dynamic</span><br><span class="line">  x64-mingw-static</span><br><span class="line">  x64-openbsd</span><br><span class="line">  x64-osx-dynamic</span><br><span class="line">  x64-osx-release</span><br><span class="line">  x64-uwp-static-md</span><br><span class="line">  x64-windows-release</span><br><span class="line">  x64-windows-static-md</span><br><span class="line">  x64-windows-static-release</span><br><span class="line">  x64-xbox-scarlett-static</span><br><span class="line">  x64-xbox-scarlett</span><br><span class="line">  x64-xbox-xboxone-static</span><br><span class="line">  x64-xbox-xboxone</span><br><span class="line">  x86-android</span><br><span class="line">  x86-freebsd</span><br><span class="line">  x86-ios</span><br><span class="line">  x86-linux</span><br><span class="line">  x86-mingw-dynamic</span><br><span class="line">  x86-mingw-static</span><br><span class="line">  x86-uwp-static-md</span><br><span class="line">  x86-uwp</span><br><span class="line">  x86-windows-static-md</span><br><span class="line">  x86-windows-static</span><br><span class="line">  x86-windows-v120</span><br></pre></td></tr></table></figure><p>选择自己需要的类型进行安装，可安装多种</p><p>等待安装完成：</p><p><img src="v2-78d53d13d5a4066fbd1cc8a0365304c6_720w.webp" alt="img"></p><p>打开测试项目，并按照上一步对项目安装NuGet程序包源；</p><p>项目添加如下代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOOST_UUID_FORCE_AUTO_LINK</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/uuid/uuid.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/uuid/uuid_generators.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/uuid/uuid_io.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> boost::uuids;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">random_generator gen;</span><br><span class="line">uuid id = <span class="built_in">gen</span>();</span><br><span class="line">std::cout &lt;&lt; id &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="v2-7e57caabdfacc8e425090a832cf273fb_720w.webp" alt="img"></p><p>编译并运行：</p><p><img src="v2-c8846ffb67a176311057bea3b795088b_720w.webp" alt="img"></p><p>说明boost库在vcpkg中安装成功，并成功在VS2022工程中使用。</p><h2 id="CMake（Clion）-vcpkg"><a href="#CMake（Clion）-vcpkg" class="headerlink" title="CMake（Clion）+vcpkg"></a>CMake（Clion）+vcpkg</h2><p><a href="https://github.com/microsoft/vcpkg#using-vcpkg-with-cmake">microsoft/vcpkg: C++ Library Manager for Windows, Linux, and MacOS (github.com)</a></p><p><strong>需要注意的是vcpkg在windows默认用MSVC进行编译，所以在项目中使用也应该用MSVC编译器才可以使用</strong></p><h3 id="使用-shell-安装软件包"><a href="#使用-shell-安装软件包" class="headerlink" title="使用 shell 安装软件包"></a>使用 shell 安装软件包</h3><p>以eigen3安装为例，在vcpkg的根目录下打开power shell，输入</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg install eigen3</span><br></pre></td></tr></table></figure><p>这里在安装成功之后一般会给出包的使用方法提示</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find_package(Eigen3 CONFIG REQUIRED)</span><br><span class="line">target_link_libraries(main PRIVATE Eigen3::Eigen)</span><br></pre></td></tr></table></figure><h3 id="简单使用方式"><a href="#简单使用方式" class="headerlink" title="简单使用方式"></a>简单使用方式</h3><p>按照官方给出的办法使用包，方便之处在于不需要额外配置头文件和lib的路径，也不需要手动将dll文件放到bin目录下，vcpkg会自动完成这些配置。</p><p>如果你没有在环境变量中配置vcpkg的相关变量，而是在CMakeLists中配置vcpkg，需要注意把vcpkg的配置信息放在project之前，如下</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.21.0)</span><br><span class="line"></span><br><span class="line">set(VCPKG_ROOT &quot;E:/vcpkg&quot;)            # 手动设置到你的vcpkg根目录</span><br><span class="line">set(CMAKE_TOOLCHAIN_FILE &quot;$&#123;VCPKG_ROOT&#125;/scripts/buildsystems/vcpkg.cmake&quot;)</span><br><span class="line"></span><br><span class="line">project(MyProject LANGUAGES CXX)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="openssl使用例子"><a href="#openssl使用例子" class="headerlink" title="openssl使用例子"></a>openssl使用例子</h3><p>安装openssl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install openssl</span><br></pre></td></tr></table></figure><p><img src="image-20240309163359578.png" alt="image-20240309163359578"></p><p>复制里面的内容,后面使用</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(OpenSSL REQUIRED)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(main PRIVATE OpenSSL::SSL OpenSSL::Crypto)</span><br></pre></td></tr></table></figure><p>打开Clion，新建项目，在CmakeLists.txt填入上面内容</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.26</span>)</span><br><span class="line"><span class="keyword">set</span>(VCPKG_ROOT <span class="string">&quot;C:/softwares/vcpkg-master&quot;</span>)            <span class="comment"># 手动设置到你的vcpkg根目录</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_TOOLCHAIN_FILE <span class="string">&quot;$&#123;VCPKG_ROOT&#125;/scripts/buildsystems/vcpkg.cmake&quot;</span>)</span><br><span class="line"><span class="keyword">project</span>(clion_demo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"><span class="keyword">add_compile_options</span>(<span class="string">&quot;$&lt;$&lt;C_COMPILER_ID:MSVC&gt;:/utf-8&gt;&quot;</span>)</span><br><span class="line"><span class="keyword">add_compile_options</span>(<span class="string">&quot;$&lt;$&lt;CXX_COMPILER_ID:MSVC&gt;:/utf-8&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里添加包</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenSSL REQUIRED)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> PRIVATE OpenSSL::SSL OpenSSL::Crypto)</span><br></pre></td></tr></table></figure><p>main.cpp文件如下</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/rsa.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;openssl/pem.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 生成 RSA 密钥对</span></span><br><span class="line">    RSA *rsa = <span class="built_in">RSA_generate_key</span>(<span class="number">2048</span>, RSA_F4, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (!rsa) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to generate RSA key pair\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加密明文</span></span><br><span class="line">    std::string plaintext = <span class="string">&quot;Hello, RSA!&quot;</span>;</span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">unsigned</span> <span class="type">char</span>&gt; <span class="title">ciphertext</span><span class="params">(RSA_size(rsa))</span></span>;</span><br><span class="line">    <span class="type">int</span> ciphertext_len = <span class="built_in">RSA_public_encrypt</span>(plaintext.<span class="built_in">size</span>(),</span><br><span class="line">                                            <span class="built_in">reinterpret_cast</span>&lt;<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *&gt;(plaintext.<span class="built_in">c_str</span>()),</span><br><span class="line">                                            ciphertext.<span class="built_in">data</span>(), rsa, RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span> (ciphertext_len == <span class="number">-1</span>) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;RSA encryption failed\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解密密文</span></span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">unsigned</span> <span class="type">char</span>&gt; <span class="title">decryptedtext</span><span class="params">(RSA_size(rsa))</span></span>;</span><br><span class="line">    <span class="type">int</span> decryptedtext_len = <span class="built_in">RSA_private_decrypt</span>(ciphertext_len, ciphertext.<span class="built_in">data</span>(), decryptedtext.<span class="built_in">data</span>(), rsa,</span><br><span class="line">                                                RSA_PKCS1_PADDING);</span><br><span class="line">    <span class="keyword">if</span> (decryptedtext_len == <span class="number">-1</span>) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;RSA decryption failed\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印结果</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Plaintext: &quot;</span> &lt;&lt; plaintext &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Ciphertext: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; ciphertext_len; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%02x&quot;</span>, ciphertext[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Decryptedtext: &quot;</span></span><br><span class="line">              &lt;&lt; std::<span class="built_in">string</span>(<span class="built_in">reinterpret_cast</span>&lt;<span class="type">const</span> <span class="type">char</span> *&gt;(decryptedtext.<span class="built_in">data</span>()), decryptedtext_len) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放 RSA 密钥对</span></span><br><span class="line">    <span class="built_in">RSA_free</span>(rsa);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 生成 RSA 密钥对</span></span><br><span class="line">    RSA* rsa = <span class="built_in">RSA_new</span>();</span><br><span class="line">    BIGNUM* exponent = <span class="built_in">BN_new</span>();</span><br><span class="line">    <span class="built_in">BN_set_word</span>(exponent, RSA_F4);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">RSA_generate_key_ex</span>(rsa, <span class="number">2048</span>, exponent, <span class="literal">nullptr</span>)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to generate RSA key pair\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存公钥</span></span><br><span class="line">    std::string pubkey_filename = <span class="string">&quot;publickey.pem&quot;</span>;</span><br><span class="line">    FILE* pubkey_file = <span class="built_in">fopen</span>(pubkey_filename.<span class="built_in">c_str</span>(), <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!pubkey_file) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to create public key file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">PEM_write_RSAPublicKey</span>(pubkey_file, rsa)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to write public key to file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(pubkey_file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存私钥</span></span><br><span class="line">    std::string privkey_filename = <span class="string">&quot;privatekey.pem&quot;</span>;</span><br><span class="line">    FILE* privkey_file = <span class="built_in">fopen</span>(privkey_filename.<span class="built_in">c_str</span>(), <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!privkey_file) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to create private key file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">PEM_write_RSAPrivateKey</span>(privkey_file, rsa, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>, <span class="number">0</span>, <span class="literal">nullptr</span>, <span class="literal">nullptr</span>)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Failed to write private key to file\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(privkey_file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    <span class="built_in">RSA_free</span>(rsa);</span><br><span class="line">    <span class="built_in">BN_free</span>(exponent);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">test01</span>();     <span class="comment">//加密字符串例子</span></span><br><span class="line">    <span class="built_in">test02</span>();      <span class="comment">//c++ openssl生成公钥私钥保存到文件 有问题</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果，表示可以成功使用</p><p><img src="image-20240309163710420.png" alt="image-20240309163710420"></p><h3 id="使用-vcpkg-json-为你的项目配置第三方依赖"><a href="#使用-vcpkg-json-为你的项目配置第三方依赖" class="headerlink" title="使用 vcpkg.json 为你的项目配置第三方依赖"></a>使用 vcpkg.json 为你的项目配置第三方依赖</h3><p>可能你的项目需要在多台电脑上编译，如果在每台电脑上都使用shell手动安装依赖库显然不是优雅的解决办法。又或者你的项目需要固定第三方依赖的版本，而vcpkg的命令行似乎没有给出选择软件包版本的选项，难道只能通过不更新vcpkg来使软件库永远保持在某个版本吗？那如果想对某个依赖的版本降级怎么办？</p><p>对于自动安装依赖的问题，vcpkg给出的解决办法是，在你的项目的根目录也就是顶级CMakeLists.txt所在目录创建名为vcpkg.json的配置文件：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;:&quot;MyProject_dependencies&quot;,</span><br><span class="line">    &quot;version-semver&quot;:&quot;1.0.0&quot;,</span><br><span class="line">    &quot;dependencies&quot;:[</span><br><span class="line">        &quot;cgal&quot;,</span><br><span class="line">        &quot;eigen3&quot;,</span><br><span class="line">        &quot;freeimage&quot;,</span><br><span class="line">        &quot;glm&quot;,</span><br><span class="line">        &quot;glew&quot;,</span><br><span class="line">        &quot;flann&quot;,</span><br><span class="line">        &quot;lz4&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>并在环境变量或CMakeLists中配置变量</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(VCPKG_FEATURE_FLAGS &quot;version&quot;)          # 用于支持自定义依赖版本</span><br></pre></td></tr></table></figure><p>如此，不需要在shell手动安装软件包，运行cmake的时候vcpkg会自动将配置文件中的所有依赖安装到你项目的build\vcpkg_installed目录下。</p><h3 id="关于vcpkg支持哪些库"><a href="#关于vcpkg支持哪些库" class="headerlink" title="关于vcpkg支持哪些库"></a>关于vcpkg支持哪些库</h3><p>使用shell命令</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg search ***</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/615585442">VS2022 + vcpkg 使用 - 知乎 (zhihu.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/477497540">使用VCPKG管理你的第三方依赖 - 知乎 (zhihu.com)</a></p><p><a href="https://learn.microsoft.com/zh-cn/vcpkg/commands/install">vcpkg install | Microsoft Learn</a></p><p><a href="https://learn.microsoft.com/zh-cn/vcpkg/get_started/overview">vcpkg 概述 | Microsoft Learn</a></p><p><a href="https://github.com/microsoft/vcpkg#using-vcpkg-with-cmake">microsoft/vcpkg: C++ Library Manager for Windows, Linux, and MacOS (github.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> vcpkg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vcpkg </tag>
            
            <tag> Clion </tag>
            
            <tag> Cmake </tag>
            
            <tag> C++ </tag>
            
            <tag> VS2022 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clion中开发Qt</title>
      <link href="/posts/56c9a421/"/>
      <url>/posts/56c9a421/</url>
      
        <content type="html"><![CDATA[<h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><p>使用clion 创建一个QT工程，注意其中Qt CMake前缀路径的选择：</p><p>语言标准，Qt5最高选择C++14，Qt6可以选择C++17</p><p><img src="image-20240309150148931.png" alt="image-20240309150148931"></p><p>新建好的工程如下：</p><p><img src="image-20240309150450123.png" alt="image-20240309150450123"></p><p>这个时候直接编译运行可能会出错，</p><p><img src="image-20240309151831642.png" alt="image-20240309151831642"></p><p>我们需要将<code>CMakeLists.txt</code>中的</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (MSVC <span class="keyword">AND</span> CMAKE_BUILD_TYPE <span class="keyword">MATCHES</span> <span class="string">&quot;Debug&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(DEBUG_SUFFIX <span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (CMAKE_BUILD_TYPE MATCHES &quot;Debug&quot;)</span><br><span class="line">    set(DEBUG_SUFFIX &quot;d&quot;)</span><br><span class="line">endif ()</span><br></pre></td></tr></table></figure><h2 id="修改cmake"><a href="#修改cmake" class="headerlink" title="修改cmake"></a>修改cmake</h2><p>此时<code>CMakeLists.txt</code>文件内容为</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.28</span>)</span><br><span class="line"><span class="keyword">project</span>(testQt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTORCC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOUIC <span class="keyword">ON</span>)  <span class="comment">#自动将ui翻译为h文件，无须手动转换</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_PREFIX_PATH <span class="string">&quot;C:/xd/Qt/5.13.1/mingw73_64/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(Qt5 COMPONENTS</span><br><span class="line">        Core</span><br><span class="line">        Gui</span><br><span class="line">        Widgets</span><br><span class="line">        REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(testQt src/main.cpp</span><br><span class="line">        src/mainwindows.cpp</span><br><span class="line">        src/mainwindows.h</span><br><span class="line">        src/mainwindows.ui</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(testQt</span><br><span class="line">        Qt5::Core</span><br><span class="line">        Qt5::Gui</span><br><span class="line">        Qt5::Widgets</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#这段代码的意思大概是：将dll文件复制到可执行文件所在目录</span></span><br><span class="line"><span class="keyword">if</span> (WIN32 <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">DEFINED</span> CMAKE_TOOLCHAIN_FILE)</span><br><span class="line">    <span class="keyword">set</span>(DEBUG_SUFFIX)</span><br><span class="line"><span class="comment">#    if (MSVC AND CMAKE_BUILD_TYPE MATCHES &quot;Debug&quot;)</span></span><br><span class="line"><span class="comment">#        set(DEBUG_SUFFIX &quot;d&quot;)</span></span><br><span class="line"><span class="comment">#    endif ()</span></span><br><span class="line">    <span class="keyword">if</span> (CMAKE_BUILD_TYPE <span class="keyword">MATCHES</span> <span class="string">&quot;Debug&quot;</span>)</span><br><span class="line">        <span class="keyword">set</span>(DEBUG_SUFFIX <span class="string">&quot;d&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;CMAKE_PREFIX_PATH&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin&quot;</span>)</span><br><span class="line">        <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/..&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin&quot;</span>)</span><br><span class="line">            <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/..&quot;</span>)</span><br><span class="line">        <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/plugins/platforms/qwindows$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span>)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E <span class="keyword">make_directory</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;/plugins/platforms/&quot;</span>)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy</span><br><span class="line">                <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/plugins/platforms/qwindows$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;/plugins/platforms/&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">foreach</span> (QT_LIB Core Gui Widgets)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy</span><br><span class="line">                <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin/Qt5$&#123;QT_LIB&#125;$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">endforeach</span> (QT_LIB)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以上模板仅供参考。</p><p><img src="image-20240309152234170.png" alt="image-20240309152234170"></p><p>这个时候Debug模式和release模式均可以运行</p><p><img src="image-20240309152300989.png" alt="image-20240309152300989"></p><p>需要注意的是</p><p>如果安装的qt是mingw版本的工具链使用的也应该是Mingw版本，MSVC也同理。否则不能运行</p><p><img src="image-20240309152437581.png" alt="image-20240309152437581"></p><h2 id="重构目录"><a href="#重构目录" class="headerlink" title="重构目录"></a>重构目录</h2><p>在这里，为了目录结构的清晰，我们简单重构一下我们的项目目录。重构后如下：</p><ul><li>新建一个src文件夹用来保存源代码包括  <em>.h  </em>.cpp  *.ui，也可以使用子文件夹，对大的Qt项目分模块</li><li>test，用来保存测试代码。</li><li>third_party，用来保存我们使用的第三方源代码，动态库，静态库等。</li><li>resource，用来保存qrc资源文件，图片文件等。</li><li>include(可选)，用来把我们项目的头文件暴漏给其他人使用。</li></ul><p><img src="image-20240309153316013.png" alt="image-20240309153316013"></p><h2 id="新建界面UI类"><a href="#新建界面UI类" class="headerlink" title="新建界面UI类"></a>新建界面UI类</h2><p>对着左侧项目根目录右键，选择新建，新建一个QT Ui类：</p><p><img src="image-20240309153355541.png" alt="image-20240309153355541"></p><p>给新建的UI类起一个名字，这里就叫做<code>QMainWindow</code>，基类我们选择<code>QMainwindow</code>,此时我们可以看到，clion 会自动帮我们把新生成的文件添加到cmake中：</p><p><img src="image-20240309153630744.png" alt="image-20240309153630744"></p><h2 id="修改main-cpp"><a href="#修改main-cpp" class="headerlink" title="修改main.cpp"></a>修改main.cpp</h2><p>然后我们将<code>main.cpp</code>修改为以下内容：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindows.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Mainwindows w;</span><br><span class="line">    w.<span class="built_in">show</span> ();</span><br><span class="line">    <span class="keyword">return</span> QApplication::<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>编译运行，就能看到我们的结果啦：</p><p><img src="image-20240309153901473.png" alt="image-20240309153901473"></p><h2 id="在clion-中添加外部工具"><a href="#在clion-中添加外部工具" class="headerlink" title="在clion 中添加外部工具"></a>在clion 中添加外部工具</h2><p>在设置中的外部工具中，添加一个新的外部工具，指向<code>designer.exe</code>：</p><p><img src="image-20240309154033982.png" alt="image-20240309154033982"></p><p>然后我们就能对着UI文件右键，选择外部工具，最后使用QtDesigner打开它：</p><p><img src="image-20240309154108019.png" alt="image-20240309154108019"></p><h2 id="设置ui文件双击打开"><a href="#设置ui文件双击打开" class="headerlink" title="设置ui文件双击打开"></a>设置ui文件双击打开</h2><p>如果您将Qt Designer与Qt分开安装，CLion可能无法检测到它，并将在编辑器中打开<strong>.ui</strong>文件。在这种情况下，请执行以下操作以在Qt Designer中打开它们：</p><p>前往设置-&gt;编辑器-&gt;文件类型</p><p>从“识别的文件类型”列表中选择“Qt UI Designer Form”，然后删除关联的文件扩展名：</p><p><img src="/cl_qt_ui_removeassoc.png" alt="删除 .ui 文件的关联" style="zoom: 50%;" /></p><p>选择在关联的应用程序中打开的文件并添加扩展名：<code>.ui</code></p><p><img src="image-20240309154441929.png" alt="image-20240309154441929"></p><p>保存。</p><p>同时确保ui文件在系统的默认打开方式是Qt Designer ，如果不是，则应该右击ui文件并设置打开方式为</p><p>默认应用。</p><p><img src="image-20240309154645778.png" alt="image-20240309154645778"></p><p>此时双击ui文件既可以开打Qt Designer</p><p><img src="image-20240309154931074.png" alt="image-20240309154931074"></p><h2 id="添加qrc资源文件"><a href="#添加qrc资源文件" class="headerlink" title="添加qrc资源文件"></a>添加qrc资源文件</h2><p>可以在Qt Designer中手动添加，点击资源浏览器资源编辑，新建资源。</p><p><img src="image-20240309155214235.png" alt="image-20240309155214235"></p><p>文件名为src.qrc 保存到项目新建的resource目录。</p><p>添加图片文件</p><p><img src="image-20240309155420695.png" alt="image-20240309155420695"></p><p><img src="image-20240309155757368.png" alt="image-20240309155757368"></p><p>给主窗口添加背景图，并保存</p><p><img src="image-20240309155928178.png" alt="image-20240309155928178"></p><p>给CMakeLists.txt添加资源文件 <code>resource/src.qrc</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(testQt src/main.cpp</span><br><span class="line">        src/mainwindows.cpp</span><br><span class="line">        src/mainwindows.h</span><br><span class="line">        src/mainwindows.ui</span><br><span class="line">        resource/src.qrc</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>运行即可看到效果</p><p><img src="image-20240309160417823.png" alt="image-20240309160417823" style="zoom: 67%;" /></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/461896034">使用 clion 开发 QT - 知乎 (zhihu.com)</a></p><p><a href="https://www.jetbrains.com/help/clion/qt-tutorial.html#fcb888de_226">Qt项目 |CLion 文档 (jetbrains.com)</a></p><p><a href="https://www.jetbrains.com/help/clion/qml-syntax-support.html#extra-imports">QML语法支持 |CLion 文档 (jetbrains.com)</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Clion中开发Qt</title>
      <link href="/posts/56c9a421/"/>
      <url>/posts/56c9a421/</url>
      
        <content type="html"><![CDATA[<h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><p>使用clion 创建一个QT工程，注意其中Qt CMake前缀路径的选择：</p><p>语言标准，Qt5最高选择C++14，Qt6可以选择C++17</p><p><img src="image-20240309150148931.png" alt="image-20240309150148931"></p><p>新建好的工程如下：</p><p><img src="image-20240309150450123.png" alt="image-20240309150450123"></p><p>这个时候直接编译运行可能会出错，</p><p><img src="image-20240309151831642.png" alt="image-20240309151831642"></p><p>我们需要将<code>CMakeLists.txt</code>中的</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (MSVC <span class="keyword">AND</span> CMAKE_BUILD_TYPE <span class="keyword">MATCHES</span> <span class="string">&quot;Debug&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(DEBUG_SUFFIX <span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (CMAKE_BUILD_TYPE MATCHES &quot;Debug&quot;)</span><br><span class="line">    set(DEBUG_SUFFIX &quot;d&quot;)</span><br><span class="line">endif ()</span><br></pre></td></tr></table></figure><h2 id="修改cmake"><a href="#修改cmake" class="headerlink" title="修改cmake"></a>修改cmake</h2><p>此时<code>CMakeLists.txt</code>文件内容为</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.28</span>)</span><br><span class="line"><span class="keyword">project</span>(testQt)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTORCC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOUIC <span class="keyword">ON</span>)  <span class="comment">#自动将ui翻译为h文件，无须手动转换</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_PREFIX_PATH <span class="string">&quot;C:/xd/Qt/5.13.1/mingw73_64/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(Qt5 COMPONENTS</span><br><span class="line">        Core</span><br><span class="line">        Gui</span><br><span class="line">        Widgets</span><br><span class="line">        REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(testQt src/main.cpp</span><br><span class="line">        src/mainwindows.cpp</span><br><span class="line">        src/mainwindows.h</span><br><span class="line">        src/mainwindows.ui</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(testQt</span><br><span class="line">        Qt5::Core</span><br><span class="line">        Qt5::Gui</span><br><span class="line">        Qt5::Widgets</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#这段代码的意思大概是：将dll文件复制到可执行文件所在目录</span></span><br><span class="line"><span class="keyword">if</span> (WIN32 <span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">DEFINED</span> CMAKE_TOOLCHAIN_FILE)</span><br><span class="line">    <span class="keyword">set</span>(DEBUG_SUFFIX)</span><br><span class="line"><span class="comment">#    if (MSVC AND CMAKE_BUILD_TYPE MATCHES &quot;Debug&quot;)</span></span><br><span class="line"><span class="comment">#        set(DEBUG_SUFFIX &quot;d&quot;)</span></span><br><span class="line"><span class="comment">#    endif ()</span></span><br><span class="line">    <span class="keyword">if</span> (CMAKE_BUILD_TYPE <span class="keyword">MATCHES</span> <span class="string">&quot;Debug&quot;</span>)</span><br><span class="line">        <span class="keyword">set</span>(DEBUG_SUFFIX <span class="string">&quot;d&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;CMAKE_PREFIX_PATH&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin&quot;</span>)</span><br><span class="line">        <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/..&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin&quot;</span>)</span><br><span class="line">            <span class="keyword">set</span>(QT_INSTALL_PATH <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/..&quot;</span>)</span><br><span class="line">        <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">EXISTS</span> <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/plugins/platforms/qwindows$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span>)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E <span class="keyword">make_directory</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;/plugins/platforms/&quot;</span>)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy</span><br><span class="line">                <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/plugins/platforms/qwindows$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;/plugins/platforms/&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">foreach</span> (QT_LIB Core Gui Widgets)</span><br><span class="line">        <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> <span class="variable">$&#123;PROJECT_NAME&#125;</span> POST_BUILD</span><br><span class="line">                <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy</span><br><span class="line">                <span class="string">&quot;$&#123;QT_INSTALL_PATH&#125;/bin/Qt5$&#123;QT_LIB&#125;$&#123;DEBUG_SUFFIX&#125;.dll&quot;</span></span><br><span class="line">                <span class="string">&quot;$&lt;TARGET_FILE_DIR:$&#123;PROJECT_NAME&#125;&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">endforeach</span> (QT_LIB)</span><br><span class="line"><span class="keyword">endif</span> ()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以上模板仅供参考。</p><p><img src="image-20240309152234170.png" alt="image-20240309152234170"></p><p>这个时候Debug模式和release模式均可以运行</p><p><img src="image-20240309152300989.png" alt="image-20240309152300989"></p><p>需要注意的是</p><p>如果安装的qt是mingw版本的工具链使用的也应该是Mingw版本，MSVC也同理。否则不能运行</p><p><img src="image-20240309152437581.png" alt="image-20240309152437581"></p><h2 id="重构目录"><a href="#重构目录" class="headerlink" title="重构目录"></a>重构目录</h2><p>在这里，为了目录结构的清晰，我们简单重构一下我们的项目目录。重构后如下：</p><ul><li>新建一个src文件夹用来保存源代码包括  <em>.h  </em>.cpp  *.ui，也可以使用子文件夹，对大的Qt项目分模块</li><li>test，用来保存测试代码。</li><li>third_party，用来保存我们使用的第三方源代码，动态库，静态库等。</li><li>resource，用来保存qrc资源文件，图片文件等。</li><li>include(可选)，用来把我们项目的头文件暴漏给其他人使用。</li></ul><p><img src="image-20240309153316013.png" alt="image-20240309153316013"></p><h2 id="新建界面UI类"><a href="#新建界面UI类" class="headerlink" title="新建界面UI类"></a>新建界面UI类</h2><p>对着左侧项目根目录右键，选择新建，新建一个QT Ui类：</p><p><img src="image-20240309153355541.png" alt="image-20240309153355541"></p><p>给新建的UI类起一个名字，这里就叫做<code>QMainWindow</code>，基类我们选择<code>QMainwindow</code>,此时我们可以看到，clion 会自动帮我们把新生成的文件添加到cmake中：</p><p><img src="image-20240309153630744.png" alt="image-20240309153630744"></p><h2 id="修改main-cpp"><a href="#修改main-cpp" class="headerlink" title="修改main.cpp"></a>修改main.cpp</h2><p>然后我们将<code>main.cpp</code>修改为以下内容：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindows.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Mainwindows w;</span><br><span class="line">    w.<span class="built_in">show</span> ();</span><br><span class="line">    <span class="keyword">return</span> QApplication::<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>编译运行，就能看到我们的结果啦：</p><p><img src="image-20240309153901473.png" alt="image-20240309153901473"></p><h2 id="在clion-中添加外部工具"><a href="#在clion-中添加外部工具" class="headerlink" title="在clion 中添加外部工具"></a>在clion 中添加外部工具</h2><p>在设置中的外部工具中，添加一个新的外部工具，指向<code>designer.exe</code>：</p><p><img src="image-20240309154033982.png" alt="image-20240309154033982"></p><p>然后我们就能对着UI文件右键，选择外部工具，最后使用QtDesigner打开它：</p><p><img src="image-20240309154108019.png" alt="image-20240309154108019"></p><h2 id="设置ui文件双击打开"><a href="#设置ui文件双击打开" class="headerlink" title="设置ui文件双击打开"></a>设置ui文件双击打开</h2><p>如果您将Qt Designer与Qt分开安装，CLion可能无法检测到它，并将在编辑器中打开<strong>.ui</strong>文件。在这种情况下，请执行以下操作以在Qt Designer中打开它们：</p><p>前往设置-&gt;编辑器-&gt;文件类型</p><p>从“识别的文件类型”列表中选择“Qt UI Designer Form”，然后删除关联的文件扩展名：</p><p><img src="/cl_qt_ui_removeassoc.png" alt="删除 .ui 文件的关联" style="zoom: 50%;" /></p><p>选择在关联的应用程序中打开的文件并添加扩展名：<code>.ui</code></p><p><img src="image-20240309154441929.png" alt="image-20240309154441929"></p><p>保存。</p><p>同时确保ui文件在系统的默认打开方式是Qt Designer ，如果不是，则应该右击ui文件并设置打开方式为</p><p>默认应用。</p><p><img src="image-20240309154645778.png" alt="image-20240309154645778"></p><p>此时双击ui文件既可以开打Qt Designer</p><p><img src="image-20240309154931074.png" alt="image-20240309154931074"></p><h2 id="添加qrc资源文件"><a href="#添加qrc资源文件" class="headerlink" title="添加qrc资源文件"></a>添加qrc资源文件</h2><p>可以在Qt Designer中手动添加，点击资源浏览器资源编辑，新建资源。</p><p><img src="image-20240309155214235.png" alt="image-20240309155214235"></p><p>文件名为src.qrc 保存到项目新建的resource目录。</p><p>添加图片文件</p><p><img src="image-20240309155420695.png" alt="image-20240309155420695"></p><p><img src="image-20240309155757368.png" alt="image-20240309155757368"></p><p>给主窗口添加背景图，并保存</p><p><img src="image-20240309155928178.png" alt="image-20240309155928178"></p><p>给CMakeLists.txt添加资源文件 <code>resource/src.qrc</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(testQt src/main.cpp</span><br><span class="line">        src/mainwindows.cpp</span><br><span class="line">        src/mainwindows.h</span><br><span class="line">        src/mainwindows.ui</span><br><span class="line">        resource/src.qrc</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>运行即可看到效果</p><p><img src="image-20240309160417823.png" alt="image-20240309160417823" style="zoom: 67%;" /></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/461896034">使用 clion 开发 QT - 知乎 (zhihu.com)</a></p><p><a href="https://www.jetbrains.com/help/clion/qt-tutorial.html#fcb888de_226">Qt项目 |CLion 文档 (jetbrains.com)</a></p><p><a href="https://www.jetbrains.com/help/clion/qml-syntax-support.html#extra-imports">QML语法支持 |CLion 文档 (jetbrains.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Clion </tag>
            
            <tag> Cpp </tag>
            
            <tag> Qt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly优化搜索引擎收录</title>
      <link href="/posts/e302e79f/"/>
      <url>/posts/e302e79f/</url>
      
        <content type="html"><![CDATA[<p>我们必须把我们的网站推送到搜索引擎那， 否则别人除了输入我们的域名或者搜索文章，是没法发现我们的博文。</p><h2 id="1-查看是否被收录"><a href="#1-查看是否被收录" class="headerlink" title="1. 查看是否被收录"></a>1. 查看是否被收录</h2><p>使用想要查找的搜索引擎，输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">site:你的网站</span><br><span class="line">比如我的：site:qmike.top</span><br></pre></td></tr></table></figure><h2 id="2-永久化-URL-网址链接"><a href="#2-永久化-URL-网址链接" class="headerlink" title="2. 永久化 URL 网址链接"></a>2. 永久化 URL 网址链接</h2><blockquote><p>我们可以发现 hexo 默认生成的文章地址路径是 【网站名称／年／月／日／文章名称】。</p><p>这种链接对搜索爬虫是很不友好的，第一它的 url 结构超过了三层，太深了。</p></blockquote><p>安装 <code>abbrlink</code> 插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure><p>关于此插件的详细信息参见它的<a href="https://github.com/rozbo/hexo-abbrlink">官方文档</a>。作用是将文章的链接转换成数字后字母，即将博客网站的网页转成<code>.html</code> 永久链接的格式，有利于搜索引擎的收录。</p><p>修改 hexo 根目录下 <code>config.yml</code> 中的 <code>permalink</code> 的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># URL</span><br><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="line">url: https://qmike.top</span><br><span class="line">permalink: posts/:abbrlink.html</span><br></pre></td></tr></table></figure><p>在 <code>config.yml</code> 最底下添加 <code>abbrlink config</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># abbrlink config</span><br><span class="line">abbrlink:</span><br><span class="line">  alg: crc32      # support crc16(default) and crc32</span><br><span class="line">  rep: hex        # support dec(default) and hex</span><br><span class="line"># 不用添加其它代码</span><br></pre></td></tr></table></figure><p>配置完成后，网站的链接应该类似这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">https://qmike.top/posts/77940e6f.html        # 有.html后缀 </span><br></pre></td></tr></table></figure><h2 id="3-站点地图"><a href="#3-站点地图" class="headerlink" title="3. 站点地图"></a>3. 站点地图</h2><p>站点地图即 <a href="https://baike.baidu.com/item/sitemap/6241567?fr=aladdin">sitemap</a>， 是一个页面，上面放置了网站上需要搜索引擎抓取的所有页面的链接。站点地图可以告诉搜索引擎网站上有哪些可供抓取的网页，以便搜索引擎可以更加智能地抓取网站。所以我们首先需要生成一个站点地图。</p><p>安装百度和 Google 的站点地图生成插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p>然后来到 hexo 根目录配置文件 <code>config.yml</code>，在下面添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># 站点地图</span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br><span class="line">baidusitemap:</span><br><span class="line">  path: baidusitemap.xml</span><br></pre></td></tr></table></figure><p>然后重新推送到服务器，访问如下 URL:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">https://你的域名/sitemap.xml</span><br><span class="line">https://你的域名/baidusitemap.xml</span><br></pre></td></tr></table></figure><p>看看网页中有没有出现代码。有的话就成功。</p><blockquote><p>注意代码中的域名是否和自己网站的一样，使用 <code>github page</code> 部署的网站，可能会出现域名不同的情况，需要之前完成 token 令牌密钥的验证，<a href="https://www.bilibili.com/video/BV1W34y1o7yK/?spm_id_from=333.788&amp;vd_source=8bba695aa4490252230ffd2e2cc0609b">视频</a>中有介绍。</p></blockquote><p>给你的 hexo 网站添加蜘蛛协议 robots.txt, 把 robots.txt 放在你的 hexo 站点的 source 文件下即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"># hexo robots.txt</span><br><span class="line">User-agent: *</span><br><span class="line">Allow: /</span><br><span class="line"></span><br><span class="line">Sitemap: https://qmike.top/sitemap.xml</span><br><span class="line">Sitemap: https://qmike.top/baidusitemap.xml</span><br></pre></td></tr></table></figure><h2 id="4-百度收录"><a href="#4-百度收录" class="headerlink" title="4. 百度收录"></a>4. 百度收录</h2><h3 id="提交网站"><a href="#提交网站" class="headerlink" title="提交网站"></a>提交网站</h3><p>通过百度站长平台进行链接提交，增加网站的索引量。先去注册并登录：<a href="https://ziyuan.baidu.com/?castk=LTE=">百度站长平台</a></p><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/image-20220904180119988.png"><img src="image-20220904180119988-17098752495171.png" alt="image-20220904180119988"></a></p><p>需要验证网站，我选择的是 <a href="https://，这根据你前面是否添加">https://，这根据你前面是否添加</a> SSL 证书来选择。并且我使用的是不带 www 的，看个人。然后到第三步，我使用的 HTML 标签验证。</p><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/image-20220904181206160.png"><img src="image-20220904181206160-17098752495172.png" alt="img"></a></p><p>把 <code>content</code> 中的字符串复制到主题配置文件<code>_config.butterfly.yml</code> 中的 <code>baidu_site_verification</code> 。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># Baidu Webmaster tools verification.</span><br><span class="line"># See: https://ziyuan.baidu.com/site</span><br><span class="line">site_verification:</span><br><span class="line">  # - name: google-site-verification</span><br><span class="line">  #   content: xxxxxx</span><br><span class="line">  - name: baidu-site-verification</span><br><span class="line">    content:  # 在这里填上面的字符串</span><br></pre></td></tr></table></figure><blockquote><p>需要将网站部署完后，再去百度站长平台完成 HTML 标签验证</p></blockquote><h3 id="提交链接"><a href="#提交链接" class="headerlink" title="提交链接"></a>提交链接</h3><p>百度站长平台的链接提交方式分为自动提交和手动提交两种，此处只讲自动提交，手动提交按照要求操作即可。</p><p><strong>主动推送</strong>最为快速的提交方式，是被百度收录最快的推送方式。主动推送可以通过安装插件实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><p>然后在 hexo 根目录配置文件<code>_config.yml</code> 中，添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line"># 主动推送百度，被百度收录</span><br><span class="line">baidu_url_submit:</span><br><span class="line">  count: 10 # 提交最新的10个链接</span><br><span class="line">  host: # 百度站长平台中注册的域名</span><br><span class="line">  token: # 秘钥，百度站长平台 &gt; 普通收录 &gt; 推送接口 &gt; 接口调用地址中token字段</span><br><span class="line">  path: baidu_urls.txt # 文本文档的地址， 新链接会保存在此文本文档里，不用改</span><br></pre></td></tr></table></figure><ul><li><p>host 为自己网站的域名，例如我的为 <code>https://qmike.top</code></p></li><li><p>token 需要打开 “普通收录–&gt; 推送接口” 进行查看</p><p><img src="image-20220904212055771-17098752495173.png" alt="image-20220904212055771"></p></li></ul><p>其次，记得查看 hexo 根目录中<code>_config.yml</code> 文件中<code>url</code> 的值， 必须包含是百度站长平台注册的域名。</p><p>最后，在<code>_config.yml</code> 文件中的 <code>deploy</code> 加入新的 <code>type</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line">deploy:</span><br><span class="line">  - type: git</span><br><span class="line">    repository: https://github.com/fenshen000/fenshen000.github.io.git</span><br><span class="line">    branch: main</span><br><span class="line">  - type: baidu_url_submitter</span><br></pre></td></tr></table></figure><blockquote><p>这里是新建一个 type，一定要注意这段代码里面各行的缩进值</p></blockquote><p>其主动推送的实现原理如下：</p><ul><li><p>新链接的产生， <code>hexo generate</code> 会产生一个文本文件，里面包含最新的链接</p></li><li><p>新链接的提交， <code>hexo deploy</code> 会从上述文件中读取链接，提交至百度搜索引擎</p><blockquote><p>不知道对于部署在 Netlify 上的网站有没有用，再查查资料</p></blockquote></li></ul><p>若要实现手动提交，则把下面的代码粘贴到百度站长平台的 “手动收录” 地址窗口即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">https://你的域名/sitemap.xml</span><br><span class="line">https://你的域名/baidusitemap.xml</span><br></pre></td></tr></table></figure><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/image-20220904213924274.png"><img src="image-20220904213924274-17098752495174.png" alt="image-20220904213924274"></a></p><p>后续慢慢等收录吧，百度收录比较慢。</p><h2 id="5-谷歌收录"><a href="#5-谷歌收录" class="headerlink" title="5. 谷歌收录"></a>5. 谷歌收录</h2><p>提交谷歌搜索引擎比较简单，在提交之前，我们依然可以使用 <code>site:域名</code> 查看网站是否被收录。进入 <a href="https://developers.google.com/search#?modal_active=none">Google 搜索中心</a>，登录你的谷歌账号。然后找到<a href="https://search.google.com/search-console/welcome">注册 Search Console</a>(在 “使用入门–&gt;SEO 新手指南” 中可以找到入口)，就直接输入你要收录的网站域名就行。</p><p>详细操作参考谷歌的<a href="https://support.google.com/webmasters/answer/9008080#html_verification&amp;zippy=%2C域名提供商%2Chtml-标记%2Chtml-文件上传">官方指南</a></p><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/image-20220904220444787.png"><img src="image-20220904220444787-17098752495175.png" alt="image-20220904220444787"></a></p><p>选择第一个或者第二个都可以的，我这里两个都选择了。</p><p>“网址前缀” 验证很简单，输入网址 <code>https://qmike.top</code> 即可直接验证。“网域” 验证较为复杂，点击 “继续” 后，操作如下：</p><blockquote><p>可以添加所有的网址变体，包括 https，http，www 和非 www 变体</p></blockquote><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/image-20220904221520736.png"><img src="image-20220904221520736-17098752495176.png" alt="image-20220904221520736"></a></p><p>打开你的域名提供商网站，在里面添加 “解析设置”。以阿里云为例：</p><ul><li><p>打开域名的 “解析设置”，点击 “添加记录”</p><p><img src="image-20220904224419062-17098752495177.png" alt="image-20220904224419062"></p></li><li><p>“记录类型” 选择 “TXT”，“主机记录” 选择 “@”，记录值写入上面复制的 TXT 记录值</p><p><img src="image-20220904225057831-17098752495178.png" alt="image-20220904225057831"></p></li><li><p>重新部署后返回谷歌页面进行验证，可能需要等待一段时间。</p></li></ul><p><a href="https://mikepicture.oss-cn-chengdu.aliyuncs.com/picture/20200403223509.png"><img src="20200403223509-17098752495179.png" alt="20200403223509"></a></p><p>两种方式，你可以下载个 HTML 文件然后放在站点目录下的 <code>source</code> 中，然后推送到服务器。或者把 <code>content</code> 中的字符串复制到主题配置文件<code>_config.butterfly.yml</code> 对应内容中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line">site_verification:</span><br><span class="line">  - name: google-site-verification</span><br><span class="line">    content: # 在这里填上面的字符串</span><br><span class="line">  - name: baidu-site-verification</span><br><span class="line">    content: XXXXX</span><br></pre></td></tr></table></figure><blockquote><p>部署网站到 Netlify，一天时间便会自动收录</p></blockquote><h2 id="6-必应收录"><a href="#6-必应收录" class="headerlink" title="6. 必应收录"></a>6. 必应收录</h2><p>必应收录也是很简单，点击<a href="https://www.bing.com/webmasters/about">必应站长</a>。先注册登录，必应收录有两种方式，一种使用刚刚谷歌导入过去，第二种是就是自己添加 URL</p><h2 id="7-其它收录"><a href="#7-其它收录" class="headerlink" title="7. 其它收录"></a>7. 其它收录</h2><p>其他搜索引擎的收录都很类似，就不一一赘述了。</p><h2 id="8-添加-nofollow-标签"><a href="#8-添加-nofollow-标签" class="headerlink" title="8. 添加 nofollow 标签"></a>8. 添加 nofollow 标签</h2><p>给非友情链接的出站链接添加「nofollow」标签，nofollow 标签是由谷歌领头创新的一个「反垃圾链接」的标签，并被百度、yahoo 等各大搜索引擎广泛支持，引用 nofollow 标签的目的是：用于指示搜索引擎不要追踪（即抓取）网页上的带有 nofollow 属性的任何出站链接，以减少垃圾链接的分散网站权重。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">npm install hexo-filter-nofollow --save</span><br></pre></td></tr></table></figure><p>再在 hexo 根目录的<code>_config.yml</code> 中添加配置，将 <code>nofollow</code> 设置为 <code>true</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">YML</span><br><span class="line">nofollow:</span><br><span class="line">  enable: true</span><br><span class="line">  field: site</span><br><span class="line">  exclude: &#x27;&#x27;</span><br></pre></td></tr></table></figure><p>这样，例外的链接将不会被加上 <code>nofollow</code> 属性。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.juanertu.com/archives/9013c8d8.html">Hexo 框架 (六)：SEO 优化及站点被搜索引擎收录设置 | 你真是一个美好的人类 (juanertu.com)</a></p><p><a href="https://qmike.top/posts/2a1b5a62">Butterfly 进阶篇（一） - SEO 优化搜索引擎收录 | 悠悠の哉 (qmike.top)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 搜索引擎收录 </tag>
            
            <tag> hexo </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux添加动态库搜索路径</title>
      <link href="/posts/cf8e0b0/"/>
      <url>/posts/cf8e0b0/</url>
      
        <content type="html"><![CDATA[<h2 id="方法1：使用-export-命令：-在终端中执行以下命令，将内容添加到当前会话的环境变量中："><a href="#方法1：使用-export-命令：-在终端中执行以下命令，将内容添加到当前会话的环境变量中：" class="headerlink" title="方法1：使用 export 命令： 在终端中执行以下命令，将内容添加到当前会话的环境变量中："></a>方法1：<strong>使用 export 命令：</strong> 在终端中执行以下命令，将内容添加到当前会话的环境变量中：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/path/to/lib:<span class="variable">$LD_LIBRARY_PATH</span> </span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><p><code>LD_LIBRARY_PATH</code>代表共享库搜索路径</p><p>请注意，此方法仅在当前会话中有效，关闭终端后会失效。</p><h2 id="方法2：修改用户的-bashrc文件"><a href="#方法2：修改用户的-bashrc文件" class="headerlink" title="方法2：修改用户的 .bashrc文件"></a>方法2：<strong>修改用户的 .bashrc文件</strong></h2><p>只对当前用户生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line">在文件的末尾添加类似下面的行：</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/local/lib64:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line">保存文件并退出编辑器。</span><br><span class="line">重新启动终端会话或执行以下命令使更改生效：</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line">这样，添加的环境变量将在每次登录时自动应用。</span><br></pre></td></tr></table></figure><h2 id="方法3：修改全局的-etc-profile文件"><a href="#方法3：修改全局的-etc-profile文件" class="headerlink" title="方法3：修改全局的/etc/profile文件"></a>方法3：修改全局的/etc/profile文件</h2><p>对所有用户生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile </span><br><span class="line"><span class="built_in">export</span>  LD_LIBRARY_PATH=/usr/local/lib64:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h2 id="方法4：修改-etc-ld-so-conf文件"><a href="#方法4：修改-etc-ld-so-conf文件" class="headerlink" title="方法4：修改/etc/ld.so.conf文件"></a>方法4：修改/etc/ld.so.conf文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ld.so.conf</span><br><span class="line"><span class="comment">#添加要搜索的目录</span></span><br><span class="line"><span class="comment">#执行下面语句可以生效</span></span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 动态库路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加快访问 GitHub 的速度</title>
      <link href="/posts/a8afb3d9/"/>
      <url>/posts/a8afb3d9/</url>
      
        <content type="html"><![CDATA[<p>随着开源项目的日益流行，越来越多的人选择在 GitHub 上托管和协作代码。然而，对于中国用户来说，由于<a href="https://cloud.baidu.com/product/et.html">网络</a>环境和地理位置的原因，访问 GitHub 可能会遇到速度慢的问题。本文将介绍几种解决方案来加快访问 GitHub 的速度。</p><h2 id="一、使用-GitHub-镜像"><a href="#一、使用-GitHub-镜像" class="headerlink" title="一、使用 GitHub 镜像"></a>一、使用 GitHub 镜像</h2><p>GitHub 镜像站是另一种加速访问 GitHub 的方式。镜像站会将 GitHub 的内容复制到本地，并提供了与 GitHub 相同的 API 服务。这样，用户就可以通过镜像站来访问 GitHub，避免了跨国网络传输的延迟。常用的 GitHub 镜像站包括：</p><ol><li>中国科学院计算机网络信息中心提供的 GitHub 镜像站（<a href="http://mirror.github.com">http://mirror.github.com</a>/)</li><li>清华大学提供的 TUNA Mirror（<a href="https://mirror.tuna.tsinghua.edu.cn/">https://mirror.tuna.tsinghua.edu.cn/</a>使用镜像站的步骤很简单，只需要在克隆或下载代码时将 URL 更换为对应的镜像站地址即可。</li></ol><h2 id="二、利用代理服务器"><a href="#二、利用代理服务器" class="headerlink" title="二、利用代理服务器"></a>二、利用代理服务器</h2><p> 代理服务器可以帮助用户绕过网络瓶颈，提高访问速度。有许多可用的代理服务器可供选择，例如 SOCKS5 代理和 HTTP 代理。在使用代理服务器时，只需将网络连接的代理地址设置为可用的代理服务器地址，即可通过代理服务器访问 GitHub。</p><h2 id="三、优化网络环境"><a href="#三、优化网络环境" class="headerlink" title="三、优化网络环境"></a>三、优化网络环境</h2><p>优化网络环境可以从多个方面入手，包括网络配置、路由器设置等。例如，在 Windows 系统中，可以通过修改 hosts 文件来指定特定的 IP 地址对应 GitHub 的<a href="https://cloud.baidu.com/product/bcd.html">域名</a>，从而加快访问速度。此外，更换更快速、更稳定的路由器和网络连接方式也能提高访问速度。</p><h2 id="四、使用-VPN-或其他网络加速工具"><a href="#四、使用-VPN-或其他网络加速工具" class="headerlink" title="四、使用 VPN 或其他网络加速工具"></a>四、使用 VPN 或其他网络加速工具</h2><p> VPN（虚拟私人网络）和其他网络加速工具可以帮助用户提高网络访问速度。VPN 可以将用户连接到更近的服务器或更快的网络环境，从而加快访问速度。一些知名的 VPN 服务提供商包括 ExpressVPN、NordVPN 和 Surfshark。此外，还有一些专门针对访问 GitHub 进行优化的工具，如 GitMate、Gitee Pro 等。</p><p>也可以使用clash，v2ray等软件。</p><p>需要注意的是，使用 VPN 或其他网络加速工具可能会带来额外的<a href="https://cloud.baidu.com/solution/security/soc.html">安全</a>风险。因此，在选择服务提供商时，请确保其具有较好的声誉和安全性。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux cpu性能测试</title>
      <link href="/posts/31cd68fa/"/>
      <url>/posts/31cd68fa/</url>
      
        <content type="html"><![CDATA[<h2 id="sysbench基础知识"><a href="#sysbench基础知识" class="headerlink" title="sysbench基础知识"></a>sysbench基础知识</h2><p>sysbench的cpu测试是在指定时间内，循环进行素数计算</p><blockquote><p>素数（也叫质数）就是从1开始的自然数中，无法被整除的数，比如2、3、5、7、11、13、17等。<br>编程公式：对正整数n，如果用2到根号n之间的所有整数去除，均无法整除，则n为素数。</p></blockquote><h2 id="sysbench安装"><a href="#sysbench安装" class="headerlink" title="sysbench安装"></a>sysbench安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># CentOS7下可使用yum安装</span><br><span class="line">yum install sysbench</span><br><span class="line"></span><br><span class="line">#ubuntu安装</span><br><span class="line">sudo apt install sysbench</span><br></pre></td></tr></table></figure><h2 id="CPU压测命令"><a href="#CPU压测命令" class="headerlink" title="CPU压测命令"></a>CPU压测命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#素数上限2万，默认10秒</span><br><span class="line">sysbench cpu --cpu-max-prime=20000 --threads=8 run</span><br><span class="line">sysbench cpu --cpu-max-prime=20000 --threads=1 run  #默认是单线程</span><br></pre></td></tr></table></figure><h2 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h2><p><strong>—cpu-max-prime</strong>: 素数生成数量的上限</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 若设置为3，则表示2、3、5（这样要计算1-5共5次）</span><br><span class="line">- 若设置为10，则表示2、3、5、7、11、13、17、19、23、29（这样要计算1-29共29次）</span><br><span class="line">- 默认值为10000</span><br></pre></td></tr></table></figure><p><strong>—threads</strong>: 线程数</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 若设置为1，则sysbench仅启动1个线程进行素数的计算</span><br><span class="line">- 若设置为2，则sysbench会启动2个线程，同时分别进行素数的计算</span><br><span class="line">- 默认值为1</span><br></pre></td></tr></table></figure><p><strong>—time</strong>: 运行时长，单位秒</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 若设置为5，则sysbench会在5秒内循环往复进行素数计算，</span><br><span class="line">  从输出结果可以看到在5秒内完成了几次，</span><br><span class="line">  比如配合--cpu-max-prime=3，则表示第一轮算得3个素数，</span><br><span class="line">  如果时间还有剩就再进行一轮素数计算，直到时间耗尽。</span><br><span class="line">  每完成一轮就叫一个event</span><br><span class="line">- 默认值为10</span><br><span class="line">- 相同时间，比较的是谁完成的event多</span><br></pre></td></tr></table></figure><p><strong>—events</strong>: event上限次数</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 若设置为100，则表示当完成100次event后，即使时间还有剩，也停止运行</span><br><span class="line">- 默认值为0，则表示不限event次数</span><br><span class="line">- 相同event次数，比较的是谁用时更少</span><br></pre></td></tr></table></figure><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><h5 id="8核心-13700-ubuntu虚拟机"><a href="#8核心-13700-ubuntu虚拟机" class="headerlink" title="8核心 13700  ubuntu虚拟机"></a>8核心 13700  ubuntu虚拟机</h5><p>多核110598</p><p>单核13824</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">110598-8核心</span><br><span class="line"></span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 8 //运行线程数8</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000  // 每个线程产生的素数上限均为20000个</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second: 11058.04 // 所有线程每秒完成了11058次event</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0007s</span><br><span class="line">    total number of events:              110598 // 10秒内所有线程一共完成了110598次event</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    0.60</span><br><span class="line">         avg:                                    0.72</span><br><span class="line">         max:                                    6.90</span><br><span class="line">         95th percentile:                        0.81</span><br><span class="line">         sum:                                79972.90</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           13824.7500/89.70// 平均每个线程完成13824次event，标准差为89.70</span><br><span class="line">    execution time (avg/stddev):   9.9966/0.00 // 每个线程平均耗时10秒，标准差为0</span><br></pre></td></tr></table></figure><h5 id="jecson-4核心arm"><a href="#jecson-4核心arm" class="headerlink" title="jecson 4核心arm"></a>jecson 4核心arm</h5><p>4核心18395</p><p>单核 2299</p><p>可以看出13700 的8个大核心是jecson的性能的5-10倍</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/56889337">linux sysbench: CPU性能测试详解 - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 性能测试 </tag>
            
            <tag> jecson </tag>
            
            <tag> 13700 </tag>
            
            <tag> sysbench </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux和windows共享文件夹</title>
      <link href="/posts/a059173d/"/>
      <url>/posts/a059173d/</url>
      
        <content type="html"><![CDATA[<h3 id="ubuntu访问windows"><a href="#ubuntu访问windows" class="headerlink" title="ubuntu访问windows"></a>ubuntu访问windows</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t cifs //10.170.27.210/ ~/share -o username=&#x27;***@qq.com&#x27;,password=&#x27;***&#x27;,vers=2.0</span><br><span class="line"></span><br><span class="line">sudo busybox  mount -t cifs //10.170.27.210/topographic_map ~/share -o username=***@qq.com,password=***,vers=2.0</span><br></pre></td></tr></table></figure><h3 id="windows访问ubuntu"><a href="#windows访问ubuntu" class="headerlink" title="windows访问ubuntu"></a>windows访问ubuntu</h3><h4 id="确认系统中安装samba"><a href="#确认系统中安装samba" class="headerlink" title="确认系统中安装samba"></a>确认系统中安装samba</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install samba</span><br></pre></td></tr></table></figure><h4 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd xdsmb -g  6000</span><br><span class="line">sudo useradd  xdsmb -u 6000 -g 6000 -s /sbin/nologin -d /dev/null</span><br></pre></td></tr></table></figure><h4 id="设置你的账户samba密码"><a href="#设置你的账户samba密码" class="headerlink" title="设置你的账户samba密码"></a>设置你的账户samba密码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/samba/smbpasswd</span><br><span class="line">sudo smbpasswd -a xdsmb    #usr 表示你的用户名</span><br></pre></td></tr></table></figure><p>然后按照提示输入密码就可以了。</p><p>密码 <em>*</em></p><h4 id="将你的用户添加到sambashare用户组中"><a href="#将你的用户添加到sambashare用户组中" class="headerlink" title="将你的用户添加到sambashare用户组中"></a>将你的用户添加到sambashare用户组中</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser xdsmb sambashare</span><br></pre></td></tr></table></figure><h4 id="具体共享文件方法"><a href="#具体共享文件方法" class="headerlink" title="具体共享文件方法"></a>具体共享文件方法</h4><p>右击你想共享的文件夹，点击本地网络共享，然后点击共享文件夹就可以了。</p><h4 id="怎么在Windows中访问这个共享文件夹"><a href="#怎么在Windows中访问这个共享文件夹" class="headerlink" title="怎么在Windows中访问这个共享文件夹"></a>怎么在Windows中访问这个共享文件夹</h4><p>方法跟Windows访问Windows是一样的，按Windows+R，然后输入</p><h4 id="命令行配置共享文件夹"><a href="#命令行配置共享文件夹" class="headerlink" title="命令行配置共享文件夹"></a>命令行配置共享文件夹</h4><p><a href="https://blog.csdn.net/lantian6/article/details/107250008">ubuntu命令行配置文件夹共享_重启ubuntu共享问价夹命令-CSDN博客</a></p><h3 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h3><h5 id="Ubuntu挂载nfs文件系统报错：mount-mnt-nfs-bad-option-for-several-filesystems-e-g-nfs-cifs-you-might-need-a-sbin-mount-helper-program-。"><a href="#Ubuntu挂载nfs文件系统报错：mount-mnt-nfs-bad-option-for-several-filesystems-e-g-nfs-cifs-you-might-need-a-sbin-mount-helper-program-。" class="headerlink" title="Ubuntu挂载nfs文件系统报错：mount: /mnt/nfs: bad option; for several filesystems (e.g. nfs, cifs) you might need a /sbin/mount. helper program.。"></a><a href="https://so.csdn.net/so/search?q=Ubuntu&amp;spm=1001.2101.3001.7020">Ubuntu</a>挂载nfs文件系统报错：mount: /mnt/nfs: bad option; for several filesystems (e.g. nfs, cifs) you might need a /sbin/mount.<type> helper program.。</h5><p><a href="https://blog.csdn.net/weixin_43782998/article/details/109788521">高版本Ubuntu挂载nfs文件系统报错：mount: /mnt/nfs: bad option； for several filesystems (e.g. nfs, cifs)_bad option; for several filesystems (e.g. nfs, cif-CSDN博客</a></p><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://blog.csdn.net/rangfei/article/details/124225799#:~:text=3.1 Ubuntu 下设置共享目录 1 对要共享的目录右击 -&gt; Local Network,2 选择Share this folder 3 安装共享服务 GUI方式安装 提示安装samba包">Ubuntu：与Windows共享文件夹_ubuntu访问windows共享文件夹-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> windows </tag>
            
            <tag> 共享文件夹 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux修改环境变量</title>
      <link href="/posts/e0ce2883/"/>
      <url>/posts/e0ce2883/</url>
      
        <content type="html"><![CDATA[<p>要将内容添加到 Linux 环境变量中，可以通过以下几种方法进行操作：</p><ol><li><p><strong>使用 export 命令：</strong> 在终端中执行以下命令，将内容添加到当前会话的环境变量中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VARIABLE_NAME=<span class="string">&quot;value&quot;</span></span><br><span class="line"></span><br><span class="line">将 `VARIABLE_NAME` 替换为要添加的环境变量的名称，将 `<span class="string">&quot;value&quot;</span>` 替换为要设置的值。</span><br><span class="line">例如，要将 `/path/to/directory` 添加到 `PATH` 环境变量中，可以执行以下命令：</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/path/to/directory:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line">这将把 `/path/to/directory` 添加到 `PATH` 变量的开头，保留原有的 `PATH` 值。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>请注意，此方法仅在当前会话中有效，关闭终端后会失效。</p></li><li><p><strong>修改用户的 .bashrc 或 .bash_profile 文件：</strong> 如果要将内容添加到特定用户的环境变量中，并在每次登录时自动应用，可以编辑用户的 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件。这些文件位于用户的主目录下。</p><p>打开终端，并使用文本编辑器（如 <code>vi</code> 或 <code>nano</code>）打开 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line">在文件的末尾添加类似下面的行：</span><br><span class="line"><span class="built_in">export</span> PATH=/home/book/cmake-3.26.0-rc6-linux-x86_64/bin:/home/cs18/vcpkg:<span class="variable">$PATH</span></span><br><span class="line">保存文件并退出编辑器。</span><br><span class="line">重新启动终端会话或执行以下命令使更改生效：</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line">这样，添加的环境变量将在每次登录时自动应用。</span><br></pre></td></tr></table></figure></li><li><p><strong>修改全局的 /etc/profile  文件：</strong> 如果要在整个系统范围内添加环境变量，可以编辑 <code>/etc/profile</code> 文件（需要管理员权限）。</p><p>打开终端，并使用管理员权限打开 <code>/etc/profile</code> 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile </span><br><span class="line">在文件中最下面添加类似下面的行：</span><br><span class="line">PATH=<span class="string">&quot;<span class="variable">$PATH</span>:/usr/local/sbin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#最后执行下面命令就可以生效</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure></li></ol><p>请根据您的需求选择适当的方法，并根据需要设置相应的环境变量。请注意，添加环境变量后，它们将在适当的上下文中可用，并对相关的应用程序生效。</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 环境变量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客需要自定义的地方</title>
      <link href="/posts/e7df18ca/"/>
      <url>/posts/e7df18ca/</url>
      
        <content type="html"><![CDATA[<p>待写</p><h2 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h2><h2 id="背景图"><a href="#背景图" class="headerlink" title="背景图"></a>背景图</h2><h2 id="留言板"><a href="#留言板" class="headerlink" title="留言板"></a>留言板</h2><h2 id="为-Github-Pages-绑定域名"><a href="#为-Github-Pages-绑定域名" class="headerlink" title="为 Github Pages 绑定域名"></a>为 Github Pages 绑定域名</h2><p><a href="https://cometeme.github.io/web/2018/08/为GitHubPages绑定域名.html#:~:text=使用自己的域名来访问博客 1 1. 修改 DNS 解析的数据 在设置 Github,Using a custom domain with GitHub Pages 。">为 Github Pages 绑定域名 - cometeme的个人博客</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>生成 SSH 密钥（windows+liunx）</title>
      <link href="/posts/e253486a/"/>
      <url>/posts/e253486a/</url>
      
        <content type="html"><![CDATA[<h1 id="生成-SSH-密钥（windows-liunx）"><a href="#生成-SSH-密钥（windows-liunx）" class="headerlink" title="生成 SSH 密钥（windows+liunx）"></a>生成 SSH 密钥（windows+liunx）</h1><h2 id="要在-Windows-10-上生成-SSH-密钥，您可以按照以下步骤操作："><a href="#要在-Windows-10-上生成-SSH-密钥，您可以按照以下步骤操作：" class="headerlink" title="要在 Windows 10 上生成 SSH 密钥，您可以按照以下步骤操作："></a><strong>要在 Windows 10 上生成 SSH 密钥，您可以按照以下步骤操作：</strong></h2><p>1.打开 PowerShell（或者按下 Windows + X 并选择 “Windows PowerShell”）；</p><p>2.在 PowerShell 中输入以下命令来生成 SSH 密钥：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>3.输入您要保存密钥文件的路径和名称。例如：C:\Users\YourName.ssh\id_rsa。您可以选择保留默认名称，因为它已经被 SSH 所识别（id_rsa）；</p><p>4.在弹出的窗口中输入密码，或者直接敲击回车键选择不设置密码；</p><p>5.这个时候，您会得到一个公共密钥（id_rsa.pub）和一个私有密钥（id_rsa）。</p><p>现在您已经成功地生成了 SSH 密钥对。公钥是要提供给远程服务器的，私钥则要保留在本地，并加以保护。</p><h2 id="在-Linux-上生成-SSH-密钥的步骤与在-Windows-上类似。您可以按照以下步骤操作："><a href="#在-Linux-上生成-SSH-密钥的步骤与在-Windows-上类似。您可以按照以下步骤操作：" class="headerlink" title="在 Linux 上生成 SSH 密钥的步骤与在 Windows 上类似。您可以按照以下步骤操作："></a><strong>在 Linux 上生成 SSH 密钥的步骤与在 Windows 上类似。您可以按照以下步骤操作：</strong></h2><p>1.打开终端（或者按下 Ctrl + Alt + T）；</p><p>2.输入以下命令来生成 SSH 密钥：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>3.输入您要保存密钥文件的路径和名称，或者直接敲击回车键选择默认值，例如：/home/YourName/.ssh/id_rsa；</p><p>4.在弹出的窗口中输入密码，或者直接敲击回车键选择不设置密码；</p><p>5.这个时候，您会得到一个公共密钥（id_rsa.pub）和一个私有密钥（id_rsa）。</p><p>现在您已经成功地生成了 SSH 密钥对。公钥是要提供给远程服务器的，私钥则要保留在本地，并加以保护。另外，如果您想要让 SSH 代理管理您的密钥，您还需要在本地配置 SSH 代理。</p>]]></content>
      
      
      <categories>
          
          <category> ssh </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACG</title>
      <link href="/posts/5665/"/>
      <url>/posts/5665/</url>
      
        <content type="html"><![CDATA[<div class="gallery-group-main"><figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://bu.dusays.com/2022/11/26/638228a86935a.webp' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">ACG</div>  <p>那些二次元的故事</p>  <a href='/gallery/ACG'></a>  </figcaption>  </figure>  </div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>综合测试</title>
      <link href="/posts/39097/"/>
      <url>/posts/39097/</url>
      
        <content type="html"><![CDATA[<h3 id="测试代码显示"><a href="#测试代码显示" class="headerlink" title="测试代码显示"></a>测试代码显示</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Buffer2D&lt;Float3&gt; <span class="title">Denoiser::Filter</span><span class="params">(<span class="type">const</span> FrameInfo &amp;frameInfo)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> height = frameInfo.m_beauty.m_height;</span><br><span class="line">    <span class="type">int</span> width = frameInfo.m_beauty.m_width;</span><br><span class="line">    Buffer2D&lt;Float3&gt; filteredImage = <span class="built_in">CreateBuffer2D</span>&lt;Float3&gt;(width, height);</span><br><span class="line">    <span class="type">int</span> kernelRadius = <span class="number">32</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">0</span>; y &lt; height; y++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">0</span>; x &lt; width; x++) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> Joint bilateral filter</span></span><br><span class="line">            <span class="comment">// filteredImage(x, y) = frameInfo.m_beauty(x, y);</span></span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> x_start = std::<span class="built_in">max</span>(<span class="number">0</span>, x - kernelRadius);</span><br><span class="line">            <span class="type">int</span> x_end = std::<span class="built_in">min</span>(width - <span class="number">1</span>, x + kernelRadius);</span><br><span class="line">            <span class="type">int</span> y_start = std::<span class="built_in">max</span>(<span class="number">0</span>, y - kernelRadius);</span><br><span class="line">            <span class="type">int</span> y_end = std::<span class="built_in">min</span>(height - <span class="number">1</span>, y + kernelRadius);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">auto</span> center_postion = frameInfo.<span class="built_in">m_position</span>(x, y);</span><br><span class="line">            <span class="keyword">auto</span> center_normal = frameInfo.<span class="built_in">m_normal</span>(x, y);</span><br><span class="line">            <span class="keyword">auto</span> center_color = frameInfo.<span class="built_in">m_beauty</span>(x, y);</span><br><span class="line"></span><br><span class="line">            Float3 final_color;</span><br><span class="line">            <span class="keyword">auto</span> total_weight = <span class="number">.0</span>f;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> m = x_start; m &lt;= x_end; m++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> n = y_start; n &lt;= y_end; n++) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">auto</span> postion = frameInfo.<span class="built_in">m_position</span>(m, n);</span><br><span class="line">                    <span class="keyword">auto</span> normal = frameInfo.<span class="built_in">m_normal</span>(m, n);</span><br><span class="line">                    <span class="keyword">auto</span> color = frameInfo.<span class="built_in">m_beauty</span>(m, n);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">auto</span> d_position = <span class="built_in">SqrDistance</span>(center_postion, postion) /</span><br><span class="line">                                      (<span class="number">2.0f</span> * m_sigmaCoord * m_sigmaCoord);</span><br><span class="line">                    <span class="keyword">auto</span> d_color = <span class="built_in">SqrDistance</span>(center_color, color) /</span><br><span class="line">                                   (<span class="number">2.0f</span> * m_sigmaColor * m_sigmaColor);</span><br><span class="line">                    <span class="keyword">auto</span> d_normal = <span class="built_in">SafeAcos</span>(<span class="built_in">Dot</span>(center_normal, normal));</span><br><span class="line">                    d_normal *= d_normal;</span><br><span class="line">                    d_normal / (<span class="number">2.0f</span> * m_sigmaNormal * m_sigmaNormal);</span><br><span class="line"></span><br><span class="line">                    <span class="type">float</span> d_plane = <span class="number">.0</span>f;</span><br><span class="line">                    <span class="keyword">if</span> (d_position &gt; <span class="number">0.f</span>) &#123;</span><br><span class="line">                        d_plane = <span class="built_in">Dot</span>(center_normal, <span class="built_in">Normalize</span>(postion - center_postion));</span><br><span class="line">                    &#125;</span><br><span class="line">                    d_plane *= d_plane;</span><br><span class="line">                    d_plane /= (<span class="number">2.0f</span> * m_sigmaPlane * m_sigmaPlane);</span><br><span class="line"></span><br><span class="line">                    <span class="type">float</span> weight = std::<span class="built_in">exp</span>(-d_plane - d_position - d_color - d_normal);</span><br><span class="line">                    total_weight += weight;</span><br><span class="line">                    final_color += color * weight;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">filteredImage</span>(x, y) = final_color / total_weight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filteredImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试公式"><a href="#测试公式" class="headerlink" title="测试公式"></a>测试公式</h3><script type="math/tex; mode=display">a+b=c</script><h3 id="测试图片"><a href="#测试图片" class="headerlink" title="测试图片"></a>测试图片</h3><p>hexo图片引用方式有三种,推荐使用第二种方式，并在开头加上 <code>typora-root-url:&#123;title&#125;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img test.png 图片引用方法一 %&#125;</span><br><span class="line"></span><br><span class="line">![图片引用方法二](test.png)</span><br><span class="line"></span><br><span class="line">![图片引用方法三](./images/test.png)</span><br></pre></td></tr></table></figure><p>如下</p><img src="/posts/39097/test.png" class="" title="图片引用方法一"><p><img src="test.png" alt="图片引用方法二"></p><p><img src="%25E6%25B5%258B%25E8%25AF%2595%25E5%259B%25BE%25E7%2589%2587/test.png" alt="图片引用方法三"></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>firstcpp</title>
      <link href="/posts/44e603ce/"/>
      <url>/posts/44e603ce/</url>
      
        <content type="html"><![CDATA[<p>这个是测试文件</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>GitHub Pages+Hexo+Fluid搭建个人博客网站</title>
      <link href="/posts/41067/"/>
      <url>/posts/41067/</url>
      
        <content type="html"><![CDATA[<h2 id="GitHub-Pages-Hexo-Fluid搭建个人博客网站"><a href="#GitHub-Pages-Hexo-Fluid搭建个人博客网站" class="headerlink" title="GitHub Pages+Hexo+Fluid搭建个人博客网站"></a>GitHub Pages+Hexo+Fluid搭建个人博客网站</h2><p>本文介绍如何使用GitHub Pages + Hexo搭建个人博客网站，完全免费，所有内容本人亲测，绝对可用。</p><h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><ol><li><h4 id="GitHub账号"><a href="#GitHub账号" class="headerlink" title="GitHub账号"></a>GitHub账号</h4><p>需要有一个GitHub账号，没有的话到 官网 申请一个。<br>注册很简单，不懂的话可以参考 GitHub申请账号</p></li><li><h4 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h4><p>在自己电脑上安装好Git，hexo部署到GitHub时要用。<br>网上找篇教程或者参考 Git安装(Windows)</p></li><li><h4 id="安装NodeJS"><a href="#安装NodeJS" class="headerlink" title="安装NodeJS"></a>安装NodeJS</h4><p>在自己电脑上安装好NodeJS，Hexo是基于NodeJS编写的，所以需要安装NodeJS和npm工具。<br>网上找篇教程或者参考 NodeJS安装及配置(Windows)</p></li></ol><h2 id="二、创建仓库"><a href="#二、创建仓库" class="headerlink" title="二、创建仓库"></a>二、创建仓库</h2><p>  在<code>GitHub</code>上创建一个新的代码仓库用于保存我们的网页。</p><p>  点击<code>Your repositories</code>，进入仓库页面。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70.png" alt="请添加图片描述"></p><p>点击<code>New</code>按钮，进入仓库创建页面。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-17097312466013.png" alt="请添加图片描述"></p><p>填写仓库名，格式必须为<code>&lt;用户名&gt;.github.io</code>，然后点击<code>Create repository</code>。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-17097312600136.png" alt="请添加图片描述"></p><p>点击<code>creating a new file</code>创建一个新文件，作为我们网站的主页。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-17097312711059.png" alt="请添加图片描述"></p><p>浏览器中访问，展示成功。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973177563416.png" alt="请添加图片描述"></p><p>这里创建的网页是非常简陋的，只是为了演示下<code>GitHub Pages</code>的使用方式。</p><h2 id="三、安装Hexo"><a href="#三、安装Hexo" class="headerlink" title="三、安装Hexo"></a>三、安装Hexo</h2><p>我们采用Hexo来创建我们的博客网站，Hexo 是一个基于NodeJS的静态博客网站生成器，使用Hexo不需开发，只要进行一些必要的配置即可生成一个个性化的博客网站，非常方便。点击进入 官网。</p><p>安装 Hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>查看版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>创建一个项目 hexo-blog 并初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init hexo-blog</span><br><span class="line"><span class="built_in">cd</span> hexo-blog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>本地启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><p><strong>浏览器访问 <a href="http://localhost:4000，页面默认主图风格如下">http://localhost:4000，页面默认主图风格如下</a></strong></p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973190888219.png" alt="请添加图片描述"></p><h2 id="四、更换主题"><a href="#四、更换主题" class="headerlink" title="四、更换主题"></a>四、更换主题</h2><p><code>Hexo</code> 默认的主题不太好看，不过官方提供了数百种主题供用户选择，可以根据个人喜好更换，官网主题点 <a href="https://hexo.io/themes/">这里</a> 查看。这里介绍两个主题的使用方法，<code>Next</code> 和 <code>Fluid</code>，个人比较喜欢<code>Fluid</code>，后面章节的功能也是以 <code>Fluid</code> 为基础进行讲解的。</p><h3 id="1-NexT-主题"><a href="#1-NexT-主题" class="headerlink" title="1. NexT 主题"></a>1. NexT 主题</h3><p><strong>安装主题</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-blog</span><br><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p><strong>使用 NexT 主题</strong></p><p>打开 _config.yml 文件，该文件为站点配置文件</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973199073122.png" alt="请添加图片描述"></p><p>将主题修改为 next</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><p><strong>本地启动</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><h3 id="2-Fluid主题"><a href="#2-Fluid主题" class="headerlink" title="2. Fluid主题"></a>2. Fluid主题</h3><p>以下安装步骤摘自 <a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid官网</a></p><p><strong>安装主题</strong></p><p>下载 <a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">最新 release 版本</a> 解压到 <code>themes</code> 目录，并将解压出的文件夹重命名为 <code>fluid</code>。</p><p><strong>指定主题</strong></p><p>如下修改 <code>Hexo</code> 博客目录中的 <code>_config.yml</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">theme: fluid  # 指定主题</span><br><span class="line">language: zh-CN  # 指定语言，会影响主题显示的语言，按需修改</span><br></pre></td></tr></table></figure><p><strong>创建「关于页」</strong></p><p>首次使用主题的「关于页」需要手动创建：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page about</span><br></pre></td></tr></table></figure><p>创建成功后，编辑博客目录下 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性。</p><p>修改后的文件示例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2020-02-23 19:20:33</span><br><span class="line">layout: about</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">这里写关于页的正文，支持 Markdown, HTML</span><br></pre></td></tr></table></figure><p><strong>本地启动</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>浏览器访问 <a href="http://localhost:4000">http://localhost:4000</a> ，<code>Fluid</code>主题风格页面如下</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973216615825.png" alt="请添加图片描述"></p><h2 id="五、创建文章"><a href="#五、创建文章" class="headerlink" title="五、创建文章"></a>五、创建文章</h2><p>如下修改 Hexo 博客目录中的 <code>_config.yml</code>，打开这个配置是为了在生成文章的时候生成一个同名的资源目录用于存放图片文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>执行如下命令创建一篇新文章，名为《测试文章》</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post 测试文章</span><br></pre></td></tr></table></figure><p>执行完成后在<code>source\_posts</code>目录下生成了一个md文件和一个同名的资源目录(用于存放图片)</p><p><img src="4d471824356e476e8c8e092caa453f8a.png" alt="请添加图片描述"></p><p>在资源目录<code>测试文章</code>中放一张图片 <code>test.png</code></p><p><img src="96a7534cb7a743438c553298b216b8b0.png" alt="请添加图片描述"></p><p>在<code>测试文章.md</code>中添加内容如下，演示了图片的三种引用方式。第一种为官方推荐用法，第二种为markdown语法，第三种和前两种图片存放位置不一样，是将图片放在<code>\source\images</code>目录下。这三种写法在md文件中图片是无法显示的，但是在页面上能正常显示。</p><p>图片的引入方式可参考官方文档 <a href="https://hexo.io/zh-cn/docs/asset-folders.html，有详细介绍。">https://hexo.io/zh-cn/docs/asset-folders.html，有详细介绍。</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 测试文章</span><br><span class="line">date: 2021-06-10 16:35:20</span><br><span class="line">tags:</span><br><span class="line">- 原创</span><br><span class="line">categories:</span><br><span class="line">- Java</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">这是一篇测试文章</span><br><span class="line"></span><br><span class="line">&#123;% asset_img test.png 图片引用方法一 %&#125;</span><br><span class="line"></span><br><span class="line">![图片引用方法二](test.png)</span><br><span class="line"></span><br><span class="line">![图片引用方法三](images/test.png)</span><br></pre></td></tr></table></figure><p><strong>本地启动</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>浏览器访问 <a href="http://localhost:4000，页面如下，文章添加成功">http://localhost:4000，页面如下，文章添加成功</a></p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973235097232.png" alt="请添加图片描述"></p><h2 id="六、个性化页面展示"><a href="#六、个性化页面展示" class="headerlink" title="六、个性化页面展示"></a>六、个性化页面展示</h2><p>页面的标题等位置显示默认的文字，可以改下显示一些个性化的信息。</p><h3 id="1-浏览器tab页名称"><a href="#1-浏览器tab页名称" class="headerlink" title="1. 浏览器tab页名称"></a>1. 浏览器tab页名称</h3><p>修改根目录下 <code>_config.yml</code> 中的 <code>title</code> 字段。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973237506635.png" alt="请添加图片描述"></p><h3 id="2-博客标题"><a href="#2-博客标题" class="headerlink" title="2. 博客标题"></a>2. 博客标题</h3><p>主题目录 <code>themes\fluid</code> 下 <code>_config.yml</code> 中的 <code>blog_title</code> 字段。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973240546038.png" alt="请添加图片描述"></p><h3 id="3-主页正中间的文字"><a href="#3-主页正中间的文字" class="headerlink" title="3. 主页正中间的文字"></a>3. 主页正中间的文字</h3><p>主题目录 <code>themes\fluid</code> 下 <code>_config.yml</code> 中的 <code>text</code> 字段。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973242297441.png" alt="请添加图片描述"></p><p>修改好配置后，页面效果如下，可以看到现在显示的内容变成了我们的个人信息。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973243621044.png" alt="请添加图片描述"></p><h2 id="七、添加阅读量统计"><a href="#七、添加阅读量统计" class="headerlink" title="七、添加阅读量统计"></a>七、添加阅读量统计</h2><p><code>Fluid</code> 主题写好了统计阅读量的代码，但是缺少相应配置所以没有开启，需要借助三方服务来统计阅读量，这里是有 <code>Leancloud</code> 的免费服务来进行统计。</p><h3 id="1-申请LeanCloud账号并创建应用"><a href="#1-申请LeanCloud账号并创建应用" class="headerlink" title="1. 申请LeanCloud账号并创建应用"></a>1. 申请LeanCloud账号并创建应用</h3><p>进入 <a href="https://console.leancloud.cn/">官网</a> 注册账号</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973245991647.png" alt="请添加图片描述"></p><p>需实名认证，完成后才能使用各项服务</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973248355150.png" alt="请添加图片描述"></p><p>验证邮箱</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973249360553.png" alt="请添加图片描述"></p><p>创建应用，选择<code>开发版</code>即可，免费的</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973251024756.png" alt="请添加图片描述"></p><p>进入该应用的 <code>设置-&gt;应用凭证</code>，找到 <code>AppID</code> 和 <code>AppKey</code>，记录下来后面配置要用</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973252709559.png" alt="请添加图片描述"></p><h3 id="2-修改Fluid配置"><a href="#2-修改Fluid配置" class="headerlink" title="2. 修改Fluid配置"></a>2. 修改Fluid配置</h3><p>打开主题目录 <code>themes\fluid</code>下的 <code>_config.yml</code> 文件，修改如下配置</p><p><strong>单篇文章阅读量计数</strong></p><p>打开统计开关</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973254863762.png" alt="请添加图片描述"></p><p>配置 <code>leancloud</code>的 <code>app_id</code> 和 <code>app_key</code></p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973256435465.png" alt="请添加图片描述"></p><p>打开计数功能，统计来源改为 <code>leancloud</code></p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973257710768.png" alt="请添加图片描述"></p><p>页面效果</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973258722771.png" alt="请添加图片描述"></p><p>页面底部展示网站的 PV、UV 统计数</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973259582274.png" alt="请添加图片描述"></p><p>页面效果</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973260379677.png" alt="请添加图片描述"></p><h2 id="八、添加评论功能"><a href="#八、添加评论功能" class="headerlink" title="八、添加评论功能"></a>八、添加评论功能</h2><p>评论功能的代码已经写好了，只不过没有开启，需要修改一些配置</p><p>打开主题目录 <code>themes\fluid</code>下的 <code>_config.yml</code> 文件，修改如下配置</p><p>启用评论插件</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973263277980.png" alt="请添加图片描述"></p><p>配置 <code>LeanCloud</code> 的 <code>appId</code> 和 <code>appkey</code></p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973263969583.png" alt="请添加图片描述"></p><p>重新部署后，查看页面效果，评论功能已开启</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973265015086.png" alt="请添加图片描述"></p><p>部署在本地时评论无法提交，会报跨域问题，发布到 <code>GitHub Pages</code> 上之后课正常提交评论</p><h2 id="九、发布到GitHub-Pages"><a href="#九、发布到GitHub-Pages" class="headerlink" title="九、发布到GitHub Pages"></a>九、发布到GitHub Pages</h2><h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><p>安装hexo-deployer-git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>修改根目录下的 <code>_config.yml</code>，配置 <code>GitHub</code> 相关信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/yaorongke/yaorongke.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line">  token: ******************************</span><br></pre></td></tr></table></figure><p>其中 <code>token</code> 为 <code>GitHub</code> 的 <code>Personal access tokens</code>，获取方式如下图</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973269228189.png" alt="请添加图片描述"></p><p>部署到GitHub</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><p>浏览器访问 <a href="https://yaorongke.github.io/">https://yaorongke.github.io/</a> ，部署成功</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973271472592.png" alt="请添加图片描述"></p><h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><p>直接将 <code>public</code> 目录中的文件和目录推送至 <code>GitHub</code> 仓库和分支中。</p><p><img src="watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lhb3JvbmdrZQ==,size_16,color_FFFFFF,t_70-170973272612995.png" alt="请添加图片描述"></p><h2 id="十、发布到自己服务器，Nginx代理"><a href="#十、发布到自己服务器，Nginx代理" class="headerlink" title="十、发布到自己服务器，Nginx代理"></a>十、发布到自己服务器，Nginx代理</h2><p>如果自己有服务器的话，也可以不使用 GitHub Pages，直接部署的自己的服务器上，通过 Nginx 进行代理，我这里有一个阿里云上的 CentOS 7 版的 Linux 服务器，演示下如何部署，步骤如下。</p><p>打开 hexo-blog 根目录下的 _config.yml，增加如下配置，这是因为把网站存放在了子目录中，要和 Nginx 配置中的 location /blog 路径一致。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root: /blog</span><br></pre></td></tr></table></figure><p><code>hexo-blog</code> 根目录下执行打包命令，打包好的文件在 <code>public</code> 目录下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>将<code>public</code> 目录下的文件复制到 <code>Linux</code> 服务器上的某个目录下，我的存放目录为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/rkyao/fronted/hexo-blog</span><br></pre></td></tr></table></figure><p>修改 <code>Nginx</code> 配置文件，我的 <code>Nginx</code> 安装路径为 <code>/usr/local</code>，大家根据自己实际情况调整</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/conf</span><br><span class="line">vim nginx.conf</span><br><span class="line"># server节点下添加如下配置</span><br><span class="line">location /blog &#123;</span><br><span class="line">    alias  /opt/rkyao/fronted/hexo-blog;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启 <code>Nginx</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin</span><br><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure><p>访问博客</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://47.96.106.173/blog/</span><br></pre></td></tr></table></figure><h2 id="十一、最终效果展示"><a href="#十一、最终效果展示" class="headerlink" title="十一、最终效果展示"></a>十一、最终效果展示</h2><p>可访问如下地址查看</p><p><a href="https://jinianyoushang.github.io/">https://jinianyoushang.github.io/</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/yaorongke/article/details/119089190">GitHub Pages + Hexo搭建个人博客网站，史上最全教程_hexo博客-CSDN博客</a></p><p><a href="https://butterfly.js.org/">Butterfly - A Simple and Card UI Design theme for Hexo</a></p><p><a href="https://butterfly.js.org/posts/21cfbf15/#安裝">Butterfly 安裝文檔(一) 快速開始 | Butterfly</a></p><p><a href="https://fe32.top/articles/hexo1605/#Inject">基于 Hexo 从零开始搭建个人博客（五） | 唐志远 (fe32.top)</a></p><p><a href="https://fe32.top/articles/hexo1607/#Local-search">基于 Hexo 键入搜索功能 | 唐志远 (fe32.top)</a></p><p><a href="https://console.leancloud.cn/">https://console.leancloud.cn/</a></p><p><a href="https://hexo.fluid-dev.com/docs/guide/#slogan-打字机">配置指南 | Hexo Fluid 用户手册 (fluid-dev.com)</a></p><p><a href="https://hexo.io/zh-cn/docs/asset-folders.html">资源文件夹 | Hexo</a></p><p><a href="https://connor-sun.github.io/posts/41255.html">Hexo+NexT+Typora【搭建记录&amp;使用指南】 | Connor (connor-sun.github.io)</a></p><p><a href="https://www.bilibili.com/video/BV16b4y1G7fo/?spm_id_from=333.337.search-card.all.click&amp;vd_source=0d5feab415814c73cb3f13d1f8e7642b">Hexo+Github：个人博客的搭建_哔哩哔哩_bilibili</a></p><p><a href="https://cloud.tencent.com/developer/article/1970544">Hexo + Typora + 开发Hexo插件 解决图片路径不一致-腾讯云开发者社区-腾讯云 (tencent.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> githubpage </tag>
            
            <tag> next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo插入图片且网络和本地都可以显示</title>
      <link href="/posts/21241/"/>
      <url>/posts/21241/</url>
      
        <content type="html"><![CDATA[<h2 id="hexo-typora插入图片且网络和本地都可以显示"><a href="#hexo-typora插入图片且网络和本地都可以显示" class="headerlink" title="hexo+typora插入图片且网络和本地都可以显示"></a>hexo+typora插入图片且网络和本地都可以显示</h2><p>两种方法解决解决hexo插入本地图片</p><p>先hexo new “文章名”，把图片放入<code>_posts/文章名</code> 文件夹中</p><h3 id="第一种，使用官方引用图片方式"><a href="#第一种，使用官方引用图片方式" class="headerlink" title="第一种，使用官方引用图片方式"></a>第一种，使用官方引用图片方式</h3><p>这种在本地typora不会显示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img example.jpg [title] %&#125;</span><br></pre></td></tr></table></figure><h3 id="第二种，使用typora-root-url-推荐"><a href="#第二种，使用typora-root-url-推荐" class="headerlink" title="第二种，使用typora-root-url,(推荐)"></a>第二种，使用<code>typora-root-url</code>,(推荐)</h3><p>如果你知道 typora-root-url 这一个 typora 特有的 Markdown Front-matter 的话你就知道怎么解决了。</p><p><strong>什么是 Front-matter？</strong></p><p>Front-matter 是 markdown 文件最上方以 —- 分隔的区域，用于指定个别档案的变数。</p><p>typora-root-url 指定了 typora 把哪里当做图片搜索的根目录，就像程序的 workspace 一样。</p><p><strong>怎么做？</strong></p><p>我们只需要设定 typora-root-url 为资源文件夹，然后在 typora 里面导入图片资源时写相对路径，typora 就会自动以 typora-root-url 为起始目录开始搜索。</p><p>举个例子：设置 typora-root-url 为 resource，在 typora 里面导入图片 img1.jpg，这个时候 typora 就会去找 resource/img1.jpg。</p><p>因为使用的是相对路径，hexo 也能很好识别。如果在 hexo 的 scaffolds 下修改 Markdown 模板就可以让 hexo 自动为你填写 typora-root-url 了</p><p>注意复制后删除图片前多余的<code>/</code>，比如<code>![](/image.jpg)</code>不对，应该是<code>![](image.jpg)</code></p><p>同时也要打开<code>_config.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br><span class="line">marked:</span><br><span class="line">  prependRoot: true</span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure><p>举个例子（post.md）：</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">typora-root-url: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">updated:</span><br><span class="line">tags: &#123;&#123; tags &#125;&#125;</span><br><span class="line">categories: &#123;&#123; categories &#125;&#125;</span><br><span class="line">keywords: &#123;&#123; keywords &#125;&#125;</span><br><span class="line">description: &#123;&#123; description &#125;&#125;</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">aside:</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>hexo 会使用文件名来替换 hexo + typora调教指南 字段。</p><h3 id="第三种，使用插件"><a href="#第三种，使用插件" class="headerlink" title="第三种，使用插件"></a>第三种，使用插件</h3><p>在本地typora可以显示</p><p><a href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked </a>解决hexo插入本地图片</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-marked</span><br></pre></td></tr></table></figure><p>在配置文件<code>_config.yml</code>中修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br><span class="line">marked:  </span><br><span class="line">  prependRoot: true  </span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure><p>使用语法插入图片：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](image.jpg)</span><br></pre></td></tr></table></figure><p>本地预览不显示图片的问题</p><p>在typora的设置中选择图片工具，选择格式-&gt;图像-&gt;设置图像根目录 ，到图像存放目录即可</p><p><img src="v2-8d28ac51aedad913907c45b4907d325f_720w.webp" alt="img"></p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://hexo.io/zh-cn/docs/asset-folders.html">资源文件夹 | Hexo</a></p><p><a href="https://blog.notnotype.com/2023/02/28/hexo-typora的博客体验/">hexo + typora调教指南 | Notype 的博客 (notnotype.com)</a></p><p><a href="https://zhuanlan.zhihu.com/p/265077468">hexo博客如何插入图片 - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo 插入图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo的开头</title>
      <link href="/posts/51718/"/>
      <url>/posts/51718/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">typora-root-url: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">cover: </span><br><span class="line">top_img: </span><br><span class="line">tags: </span><br><span class="line">- &#123;&#123; tags &#125;&#125;</span><br><span class="line">categories: </span><br><span class="line">- &#123;&#123; categories &#125;&#125;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">typora-root-url: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">cover: </span><br><span class="line">top_img: </span><br><span class="line">tags: </span><br><span class="line">- &#123;&#123; tags &#125;&#125;</span><br><span class="line">categories: </span><br><span class="line">- &#123;&#123; categories &#125;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> tags </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试图片</title>
      <link href="/posts/50266/"/>
      <url>/posts/50266/</url>
      
        <content type="html"><![CDATA[<h3 id="测试图片"><a href="#测试图片" class="headerlink" title="测试图片"></a>测试图片</h3><p>hexo图片引用方式有三种,推荐使用第二种方式，并在开头加上 <code>typora-root-url:&#123;title&#125;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img test.png 图片引用方法一 %&#125;</span><br><span class="line"></span><br><span class="line">![图片引用方法二](test.png)</span><br><span class="line"></span><br><span class="line">![图片引用方法三](./images/test.png)</span><br></pre></td></tr></table></figure><p>如下</p><img src="/posts/50266/test.png" class="" title="图片引用方法一"><p><img src="test.png" alt="图片引用方法二"></p><p><img src="./%E6%B5%8B%E8%AF%95%E5%9B%BE%E7%89%87/test.png" alt="图片引用方法三"></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>npm使用国内淘宝镜像的方法（两种）</title>
      <link href="/posts/30472/"/>
      <url>/posts/30472/</url>
      
        <content type="html"><![CDATA[<h3 id="一、通过命令配置"><a href="#一、通过命令配置" class="headerlink" title="一、通过命令配置"></a>一、通过命令配置</h3><h4 id="1、设置淘宝镜像源"><a href="#1、设置淘宝镜像源" class="headerlink" title="1、设置淘宝镜像源"></a>1、设置淘宝镜像源</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><h4 id="2、设置官方镜像源"><a href="#2、设置官方镜像源" class="headerlink" title="2、设置官方镜像源"></a>2、设置官方镜像源</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure><h4 id="3、查看镜像使用状态："><a href="#3、查看镜像使用状态：" class="headerlink" title="3、查看镜像使用状态："></a>3、查看镜像使用状态：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>如果返回<a href="https://registry.npmmirror.com/">https://registry.npmmirror.com/</a> ，说明配置的是淘宝镜像。</p><p>如果返回<a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a> ，说明配置的是官方镜像。</p><h3 id="二、通过使用cnpm安装"><a href="#二、通过使用cnpm安装" class="headerlink" title="二、通过使用cnpm安装"></a>二、通过使用cnpm安装</h3><h3 id="1、安装cnpm"><a href="#1、安装cnpm" class="headerlink" title="1、安装cnpm"></a>1、安装cnpm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line"> 解决安装卡顿或无法安装：</span><br><span class="line"></span><br><span class="line">注册模块镜像</span><br><span class="line"> npm set registry https://registry.npmmirror.com</span><br><span class="line">  // node-gyp 编译依赖的 node 源码镜像  </span><br><span class="line"> npm set disturl https://npmmirror.com/dist </span><br><span class="line"> // 清空缓存  </span><br><span class="line"> npm cache clean --force  </span><br><span class="line"> // 安装cnpm  </span><br><span class="line"> npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><h3 id="2、使用cnpm"><a href="#2、使用cnpm" class="headerlink" title="2、使用cnpm"></a>2、使用cnpm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install xxx</span><br></pre></td></tr></table></figure><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.csdn.net/DongShanYuXiao/article/details/129902599">npm使用国内淘宝镜像的方法（两种）-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 镜像 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
